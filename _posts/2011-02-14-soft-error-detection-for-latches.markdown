---

title: Soft error detection for latches
abstract: A system and method for soft error detection in digital ICs is disclosed. The system includes an observing circuit coupled to a latch, which circuit is capable of a response upon a state change of the latch. The system further includes synchronized clocking provided to the latch and to the observing circuit. For the latch, the clocking defines a window in time during which the latch is prevented from receiving data, and in a synchronized manner the clocking is enabling a response in the observing circuit. The clocking is synchronized in such a manner that the circuit is enabled for its response only inside the window when the latch is prevented from receiving data. The system may also have additional circuits that are respectively coupled to latches, with each the additional circuit and its respective latch receiving the synchronized clocking Responses of a plurality of circuits may be coupled in a configuration corresponding to a logical OR.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08188761&OS=08188761&RS=08188761
owner: International Business Machines Corporation
number: 08188761
owner_city: Armonk
owner_country: US
publication_date: 20110214
---
This application is a Continuation of application Ser. No. 12 723 189 filed Mar. 12 2010 which is incorporated herein by reference in its entirety.

This invention was made with Government support under Contract B554331 awarded by the Defense Advanced Research Projects Agency DARPA . The Government has certain rights to this invention.

The present invention relates to digital integrated circuits ICs . In particular it relates to error detection in such circuits.

As microelectronics arts progress toward ever smaller devices reliability is an increasing concern. One particular type failure mode in ICs is due to so called soft errors. There is no hardware damage and the error is non repeatable or traceable hence the term soft . Soft errors may have many causes but one unavoidable source of such errors is ionizing radiation in the form of alpha particles and cosmic rays.

If a soft error is detected it may be mitigated in various ways for instance by repeating the system s operation from some stored and presumably correct state. Soft errors in computation circuits may however result in undetected erroneous results. If these undetected errors are frequent enough the reliability of the entire system may be suspect. In modern processors data from successive pipeline stages of computation is often stored or latched to provide inputs to a next pipeline stage. It is thus desirable to be able to detect soft errors that cause latches to change their state.

A system characterized as being a soft error detection system is disclosed. The system includes a circuit coupled to a latch which circuit is capable of a response upon a state change of the latch. The system further includes synchronized clocking that is received by both the latch and by the circuit. The clocking defines a window in time during which the latch is prevented from receiving data and the clocking is also enabling the response of the circuit. The clocking is synchronized in such a manner between the latch and the circuit that the circuit is enabled for its response only inside the defined window when the latch is prevented from receiving data. The system may also have additional circuits that are respectively coupled to latches with each the additional circuit and its respective latch receiving the synchronized clocking. Responses of a plurality of circuits may be coupled in a logical OR configuration.

A method characterized as being a soft error detection method is also disclosed. The method includes coupling a circuit to a latch and adopting the circuit to respond to a state change of the latch. The method further includes supplying clocking to the latch and to the circuit and using the clocking to define a window in time during which the latch is prevented from receiving data and also using the clocking to enable the response of the circuit. The method further includes synchronizing the clocking between the latch and the circuit is in such a manner to enable the response of the circuit only inside the time window during which the latch is prevented from receiving data. The method may also include coupling additional circuits to respective latches supplying each of the additional circuit and its respective latch with the synchronized clocking and combining a plurality of the circuit responses in a scheme corresponding to a logical OR.

The clocking controls whether the internal state of the latch should follow the data input or hold a constant state. If an alpha particle cosmic ray or other type of disturbance induces a state change during the data phase of clocking the data input is likely to change the latch back to the correct state. However if the state of the latch is changed during the hold state it will remain in the erroneous state. Depending on particulars of a specific circuits and applications latches may typically be in the hold state from 50 to over 90 of the time.

Embodiments of the present invention disclose ways of soft error detection with minimal added circuitry in the individual latches themselves by exploiting the known clocking characteristics of latches. The latch clocking defines a window in time during which the latch is prevented from receiving data namely when the latch is in a hold state. Embodiments of the disclosure couple an observation circuit to the latch which circuit responds to a state change of the latch. The observation circuit is also receiving clocking which produces a gating for the circuit response. The clocking of the latch and that of the coupled circuit are synchronized. The circuit is gated in is such manner by the synchronized clocking that the circuit response is enabled only inside the defined time window of the latch hold state. Consequently the circuit only produces its response if the latch changes state in its supposed hold state. Such a response is a detection of a soft error because it indicates a state change in the latch during a period when it should remain stable. Once a soft error is detected further actions may be taken at a higher level to correct for the error such as for instance rolling back an execution to the last saved state.

One may implement additional observation circuits with each circuit respectively coupled to a latch that is being observed. Each additional circuit and its respective latch may receive synchronized clocking thereby gating the circuit response. A response by any of the observation circuits would indicate a soft error event.

Responses of many circuits may be combined in an observation latch in a scheme corresponding to a logical OR. There may be significantly fewer observation latches than latches observed. Outputs of the observation latches may be further combined to indicate a possible soft error induced state change in a latch located in a particular register unit or other design component. These outputs would control other hardware or software components with the purpose of correcting for the error that occurred.

Clock synchronization between the latch and the circuit may be accomplished is several ways known in the art. In a representative embodiment an additional pulse generator may be added to the local clock block the one from which the latch clocking may also originate.

The display of the nature of synchronized clocking SCLK in is only a symbolic representation of the voltage values. There are a wide variety of possible realizations of the embodiments of the present invention. Gating of the latch and of the observation circuit may be implemented in many ways and in which phase are clock voltages high or low depend on a variety of choices many of which would be only peripheral to the embodiments of the present disclosure. The latch clock voltage maybe high or low in the hold phase and the circuit clock voltage similarly may be high or low during its enabling phase . The voltage of clock signals is indicated with primed numbers such as for the latch clocking and for the circuit clocking . The transitions between high and low voltages of the clocks are shown in as gradual again symbolically indicating that voltage transitions have slew rates. Such slew rates in hardware implementations have to be taken in consideration. Accordingly in an actual IC which implements an embodiment of the disclosure the time overlap between the latch clock voltage hold phase and the circuit clock voltage enabling phase may also have to allow for considerations that are unrelated to soft errors such as for instance signal quality.

In the following discussions the terms true false and high low will interchangeably be used to characterize binary states in the IC. In general the true false terminology is logic oriented and the high low terminology is more circuit oriented. Usually true is deemed to be associated with high and false with low. But this is not a necessary connection since a given logic may have different circuit implementations. What is meaningful is the true false high low state of the various nodes relative to one another and how a state and or voltage changes in time.

Symbols presented in this as well as the other figures of the disclosure are the customary ones used in the art to depict functional elements of circuits. In such customary symbols are inverter and NOR gate .

The figure is only symbolic and the figure and the following discussion of the figure should not be interpreted in restrictive manner. As it is known in the art there are a wide variety of possible circuit realizations of the logical elements such as the XOR AND and others. The shown elements represent a certain functionality but do not specify actual circuit implantation.

As introduced in latch is the one on which the coupled circuit may detect a possible soft error event. The observation circuit contains a first and a second connection from the latch trace node to an XOR gate . The second connection includes a time delay relative to the first connection . The time delay may be implemented in the form of a series of inverters . The figure shows four inverters but the delay may be implemented with a different number depending on how much delay is desired. As the first and second connection enter the XOR gate they are not inverted relative to one another because the number of inverters used for delay in the second connection is selected to be an even number. Thus in the case of a constant voltage on the latch trace the connections at the point of entering the XOR are either both true or both false.

If the latch changes state the trace node goes from high to low or from low to high. If this happens due to the introduced time delay in the second connection the first and second connections will be inverted relative to one another at the input of XOR . This inversion would last approximately for the duration of the introduced delay. As it is known in the art an XOR gate output is true only if one but not both of its inputs are true. Accordingly a state change of the latch produces the response in the form of a true pulse on the output of the XOR gate .

The voltage pulse on the output of the XOR is received as one of the inputs of an AND gate . The other input of the AND gate is the synchronized clocking . The clocking received by the AND gate is synchronized with the clocking received by the latch in the manner described in reference to . In the synchronization of clocking signals is symbolically illustrated by showing them both emerging from a region marked as SCLK. However as discussed in reference to the relation between the clockings is a functional one without restrictions regarding the manner of their origin.

As it is known in the art an AND gate produces a true output if all its inputs are true. This means that output of the AND gate is true only when the XOR gate produces a pulse and the circuit clocking in the true state. Due to the synchronized manner of clocking the latter happens inside the time window defined by latch clocking as the hold state of the latch. Accordingly a true pulse on the output of the AND gate is an enabled response of the observing circuit with the meaning that a latch state change has occurred during a period when the latch was not supposed to have a state change. Thus a true pulse on the output of the AND gate means that a soft error event occurred in latch .

There may be M additional latches that need to be monitored for soft error occurrence. As discussed earlier such additional latches may also be observed with similar circuits as shown in . The M additional latches and circuits are indicated in by showing the M with arrows and drawing one additional circuit. The response of such M additional observing circuits is shown symbolically as an input line to the OR gate with the understanding that the actual number of such lines may be more than one. How many observation circuits may be connected in this manner depends on practical considerations regarding synchronization. For reliable results the M observation circuit outputs which are symbolically represented as input to the OR gate may have to arrive within one clock cycle. Such consideration may limit the actual number of lines included in input to the ones served by a single local clock such as the one represented with input line in . In typical embodiments such a number may be less than about 100. As it is known in the art an OR gate produces a true output if any of its inputs is true. Thus a true signal on the output of the OR gate may signify that somewhere within the range of the local clock which includes probably less than 100 latches a soft error event has occurred.

In an IC or in a whole processor possibly encompassing multiple ICs there may be many more latches susceptible to SER and being monitored by observation circuits. The response of these may not be collectible within one clock cycle. The plurality of responses from a totality of monitoring circuits is represented by the final block . It is receiving the OR gate output and symbolically represents hardware involved in the system s action in correcting the error. The first stage of such correcting hardware may be a pulse catching observation latch. And further possibly through multiple cascading logical OR operations it may collect all the plurality of observation circuit responses. From the point of view of the logic involved the plurality of the responses are combined in a scheme corresponding to a logical OR since if any of the combined responses is true it means that somewhere in the totality of the observed IC or ICs a soft error occurred. The collection of these responses and the forming of their logical OR may proceed in manners known in the art. The word plurality here encompasses all observed latches and thus it may be anywhere from two up to many millions and with miniaturization progressing it may reach into the hundreds of millions. It is understood that the complexity and function of the system response block depends on the number of observed latches in the IC or ICs.

The circuit shown in should be interpreted through its functionality and not limited by implementation details. One skilled in the art would notice that variations exist that would give essentially equivalent results. For instance the order of the AND gate and of the OR gate could be reversed with minor modifications without altering the soft error detection in the IC.

The monitored latch may be generically the same as the previously presented ones having a clock and being in a state which is observable as a voltage on the trace node . The circuit has a node which depending on the state of the circuit clocking may be in a floating state. The latch clocking and circuit clocking are synchronized in the manner presented in and indicated here by the clocking lines symbolically emerging from a SCLK marked unit. When the circuit clock is low during the data phase of the latch the node is charged high and held high through the PFET . When the circuit clock is high as within the time window of the latch hold phase the PFET indicated as closes node floats and may be pulled down since when the circuit clock is high the NFET indicated as is open.

The linkage of the latch trace node to the floating node commences at the latch trace node with two pairs of connections . Each pair of connections and have inversions and delays implemented between the two branches of the pair. These inversions and delays adapt the linkages between the latch and the floating node to discharge the floating node under appropriate circumstances.

With reference to the connection pair indicated as the figure shows that the branch going to the NFET indicated as is inverted and delayed relative to the branch going to the NFET indicated as . The figure shows three inverters but this number may be different depending of the desired delay. However whatever is the absolute number of inverters in the two branches the difference in the number of inverters between the two branches of pair indicated as is an odd number. This entails the result that if the latch trace node is holding a steady voltage one of the two inputs either the one to NFET and or the one to NFET is low and the potential discharge path is closed.

The connection pair indicated as may be described in essentially the same way as that of connection pair indicated as . The branch going to the NFET indicated as is inverted and delayed relative to the branch going to the NFET indicated as . The figure shows a difference of three inverters between the two branches but this number may be different depending of the desired delay. However whatever is the absolute number of inverters in the two branches the difference in the number of inverters between the two branches of pair indicated as is an odd number. This entails the result that if the latch trace node is holding a steady voltage one of the two inputs either the one to NFET and or the one to NFET is low and the potential discharge path is closed.

One skilled in the art would notice that the origination points of the two connection pairs should be an odd number of inverters apart and that inverters that may already exist in the latch may be used to create part of the delays of the two connection pairs .

If the latch changes state and the voltage on the trace node goes let s say from low to high then one can see that for a length of time essentially equaling the introduced delay between the two branches of connection indicated as both NFETs indicated as and will be open and if NFET indicated as is also open floating node will be pulled down from high to low through discharge path indicated as . Similarly if the voltage on the trace node goes from high to low then one can see that for a length of time essentially equaling the introduced delay between the two branches of connection indicated as both NFETs indicated as and will be open and if NFET indicated as is also open floating node will be pulled down from high to low through discharge path indicated as . Accordingly the response of this dynamic observation circuit is such that if a state change of either direction occurs in the latch during the time window when the synchronized circuit clock is high which it is inside the hold phase of the latch then the floating node will be pulled down from high to low. Thus a discharge of the floating node indicates that a soft error event occurred in latch .

In the ground symbol and high rail symbol are shown with dashed lines which meant to indicate that the circuit functions as if high and low namely rail and ground were so positioned. In actuality there may be further components present between the rail and ground but these would be transparent in regard to the operation of the circuit as described.

There may be N additional latches that need to be monitored for soft error occurrence. As discussed earlier such additional latches may also be observed with similar circuits as shown in . The N additional latches and circuits are indicated in by showing the N in the synchronized clocking and with arrows and by drawing one additional circuit. The response of N such additional observing circuits is shown symbolically as an input line capable to pull down floating node in a logical OR operation. The number of actual response lines that the single input line may represent in an embodiment follows the reasoning presented in reference to and input line . The discussion also carries over from block of to the final block here. Block is connected to the floating node and symbolically represents hardware involved in the system s action in correcting the error. Although the logic involved in blocks discussed in reference to and the logic involved in block is essentially identical the actual implementation may be different hence the same indicator number but in a primed manner. From the point of view of the logic involved block also represents the plurality of the responses combined in a scheme corresponding to a logical OR. Since if any of the combined responses is true it means that somewhere in the totality of the observed IC or ICs a soft error occurred. The word plurality encompasses all observed latches and thus it may be anywhere from two up to many millions and with miniaturization progressing it may reach into the hundreds of millions. It is understood that the complexity and function of the system response final block depends on the number of observed latches in the IC or ICs.

In the foregoing specification the invention has been described with reference to specific embodiments. However one of ordinary skill in the art appreciates that various modifications and changes can be made without departing from the scope of the present invention as set forth in the claims below. Accordingly the specification and figures are to be regarded in an illustrative rather than a restrictive sense and all such modifications are intended to be included within the scope of present invention.

Benefits other advantages and solutions to problems have been described above with regard to specific embodiments. However the benefits advantages solutions to problems and any element s that may cause any benefit advantage or solution to occur or become more pronounced are not to be construed as a critical required or essential feature or element of any or all the claims.

Many modifications and variations of the present invention are possible in light of the above teachings and could be apparent for those skilled in the art. The scope of the invention is defined by the appended claims.

