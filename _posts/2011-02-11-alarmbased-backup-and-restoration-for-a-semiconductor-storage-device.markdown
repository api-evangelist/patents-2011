---

title: Alarm-based backup and restoration for a semiconductor storage device
abstract: Embodiments of the present invention provide backup and restoration functions for a storage device of a PCI-Express (PCI-e) type that support a low-speed data processing speed for a host. Specifically, embodiments of this invention provide backup and restoration functions for one or more (i.e., a set of) semiconductor storage devices (SSDs). In general, the present invention provides an alarm unit and a secondary power supply coupled to a backup controller. The backup controller is coupled to a backup storage device. When a primary power supply is deactivated (e.g., fails), an alarm unit and the secondary power supply is activated. In response to this activation, the backup controller will backup any data stored on any SSDs of the storage system (as well as any data stored in main memory of the storage system or in main memory of any host server connected thereto). When the primary power supply is reactivated, the secondary power supply (and the alarm unit) is deactivated, and all data backed up is restored to its original source.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08954798&OS=08954798&RS=08954798
owner: Taejin Info Tech Co., Ltd.
number: 08954798
owner_city: Seoul
owner_country: KR
publication_date: 20110211
---
This application is related in some aspects to commonly owned co pending application Ser. No. 12 758 937 entitled SEMICONDUCTOR STORAGE DEVICE filed on Apr. 13 2010 the entire contents of which are herein incorporated by reference. This application is also related in some aspects to commonly owned co pending application Ser. No. 12 771 136 entitled BACKUP AND RESTORATION FOR A SEMICONDUCTOR STORAGE DEVICE filed on Apr. 30 2010 the entire contents of which are herein incorporated by reference.

The present invention relates to a semiconductor storage device of a PCI Express PCI e type. Specifically the present invention relates to backup and restoration for a storage device of a PCI Express type.

As the need for more computer storage grows more efficient solutions are being sought. As is known there are various hard disk solutions that store read data in a mechanical manner as a data storage medium. Unfortunately data processing speed associated with hard disks is often slow. Moreover existing solutions still use interfaces that cannot catch up with the data processing speed of memory disks having high speed data input output performance as an interface between the data storage medium and the host. Therefore there is a problem in the existing area in that the performance of the memory disk cannot be property utilized.

Embodiments of the present invention provide backup and restoration functions for a storage device of a PCI Express PCI e type that support a low speed data processing speed for a host. Specifically embodiments of this invention provide backup and restoration functions for one or more i.e. a set of semiconductor storage devices SSDs . In general the present invention provides an alarm unit and a secondary power supply coupled to a backup controller. The backup controller is coupled to a backup storage device. When a primary power supply is deactivated e.g. fails an alarm unit and the secondary power supply is activated. In response to this activation the backup controller will backup any data stored on any SSDs of the storage system as well as any data stored in main memory of the storage system or in main memory of any host server connected thereto . When the primary power supply is reactivated the secondary power supply and the alarm unit is deactivated and all data backed up is restored to its original source.

A first aspect of the present invention provides a system for backing up and restoring a semiconductor storage device SSD comprising a secondary power supply coupled to an SSD backup controller module unit an alarm unit coupled to the SSD backup controller a backup storage device coupled to the SSD backup controller and at least one SSD memory disk unit coupled to the SSD backup controller wherein the alarm unit and the secondary power supply is activated in response to a deactivation of a primary power supply and wherein the backup controller backs up SSD data stored on the at least one SSD memory disk unit to the backup storage device in response to the deactivation of the primary power supply.

A second aspect of the present invention provides a method for backing up and restoring a semiconductor storage device SSD comprising coupling a secondary power supply and an alarm unit to an SSD backup controller coupling a backup storage device to the SSD backup controller coupling at least one SSD memory disk unit to the SSD backup controller activating the alarm unit and secondary power supply in response to a deactivation of a primary power supply and backing up SSD data stored on the at least one SSD memory disk unit to the backup storage device using the backup controller in response to the deactivation of the primary power supply.

A third aspect of the present invention provides A method for backing up and restoring a semiconductor storage device SSD comprising coupling a secondary power supply and an alarm unit to an SSD backup controller coupling a backup storage device to the SSD backup controller coupling at least one SSD memory disk unit to the SSD backup controller activating the alarm unit and secondary power supply in response to a deactivation of a primary power supply and backing up SSD data stored on the at least one SSD memory disk unit to the backup storage device using the backup controller in response to the deactivation of the primary power supply.

The drawings are not necessarily to scale. The drawings are merely schematic representations not intended to portray specific parameters of the invention. The drawings are intended to depict only typical embodiments of the invention and therefore should not be considered as limiting the scope of the invention. In the drawings like numbering represents like elements.

Exemplary embodiments now will be described more fully herein with reference to the accompanying drawings in which exemplary embodiments are shown. This disclosure may however be embodied in many different forms and should not be construed as limited to the exemplary embodiments set forth therein. Rather these exemplary embodiments are provided so that this disclosure will be thorough and complete and will fully convey the scope of this disclosure to those skilled in the art. In the description details of well known features and techniques may be omitted to avoid unnecessarily obscuring the presented embodiments.

The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limited to this disclosure. As used herein the singular forms a an and the are intended to include the plural forms as well unless the context clearly indicates otherwise. Furthermore the use of the terms a an etc. do not denote a limitation of quantity but rather denote the presence of at least one of the referenced items. It will be further understood that the terms comprises and or comprising or includes and or including when used in this specification specify the presence of stated features regions integers steps operations elements and or components but do not preclude the presence or addition of one or more other features regions integers steps operations elements components and or groups thereof. Moreover as used herein the term RAID means redundant array of independent disks originally redundant array of inexpensive disks . In general RAID technology is a way of storing the same data in different places thus redundantly on multiple hard disks. By placing data on multiple disks I O input output operations can overlap in a balanced way improving performance. Since multiple disks increase the mean time between failures MTBF storing data redundantly also increases fault tolerance.

Unless otherwise defined all terms including technical and scientific terms used herein have the same meaning as commonly understood by one of ordinary skill in the art. It will be further understood that terms such as those defined in commonly used dictionaries should be interpreted as having a meaning that is consistent with their meaning in the context of the relevant art and the present disclosure and will not be interpreted in an idealized or overly formal sense unless expressly so defined herein.

Hereinafter a storage device of a PCI Express PCI e type according to an embodiment will be described in detail with reference to the accompanying drawings.

Embodiments of the present invention provide backup and restoration functions for a storage device of a PCI Express PCI e type that support a low speed data processing speed for a host. Specifically embodiments of this invention provide backup and restoration functions for one or more i.e. a set of semiconductor storage devices SSDs . In general the present invention provides an alarm unit and a secondary power supply coupled to a backup controller. The backup controller is coupled to a backup storage device. When a primary power supply is deactivated e.g. fails an alarm unit and the secondary power supply is activated. In response to this activation the backup controller will backup any data stored on any SSDs of the storage system as well as any data stored in main memory of the storage system or in main memory of any host server connected thereto . When the primary power supply is reactivated the secondary power supply and the alarm unit is deactivated and all data backed up is restored to its original source.

The storage device of a PCI Express PCI e type supports a low speed data processing speed for a host by adjusting synchronization of a data signal transmitted received between the host and a memory disk during data communications between the host and the memory disk through a PCI Express interface and simultaneously supports a high speed data processing speed for the memory disk thereby supporting the performance of the memory to enable high speed data processing in an existing interface environment at the maximum. It is understood in advance that although PCI Express technology will be utilized in a typical embodiment other alternatives are possible. For example the present invention could utilize Serial Attached Small Computer System Interface SAS Serial Advanced Technology Advancement SATA technology in which a SAS SATA type storage device is provided that utilizes a SAS SATA interface.

Referring now to a diagram schematically illustrating a configuration of a PCI Express type RAID controlled semiconductor storage device e.g. for providing storage for a serially attached computer device according to an embodiment of the invention is shown. As depicted shows a RAID controlled PCI Express type storage device according to an embodiment of the invention which includes a memory disk unit comprising a plurality of memory disks having a plurality of volatile semiconductor memories also referred to herein as high speed SSDs a RAID controller coupled to SSDs an interface unit e.g. PCI Express host which interfaces between the memory disk unit and a host a controller unit an auxiliary power source unit that is charged to maintain a predetermined power using the power transferred from the host through the PCI Express host interface unit a power source control unit that supplies the power transferred from the host through the PCI Express host interface unit to the controller unit the memory disk unit the backup storage unit and the backup control unit which when the power transferred from the host through the PCI Express host interface unit is blocked or an error occurs in the power transferred from the host receives power from the auxiliary power source unit and supplies the power to the memory disk unit through the controller unit a backup storage unit A B that stores data of the memory disk unit and a backup controller that backs up data stored in the memory disk unit in the backup storage unit according to an instruction from the host or when an error occurs in the power transmitted from the host and a redundant array of independent disks RAID controller coupled to memory disk unit controller and an internal backup controller .

The memory disk unit includes a plurality of memory disks provided with a plurality of volatile semiconductor memories for high speed data input output for example DDR DDR2 DDR3 SDRAM and the like and inputs and outputs data according to the control of the controller . The memory disk unit may have a configuration in which the memory disks are arrayed in parallel.

The PCI Express host interface unit interfaces between a host and the memory disk unit . The host may be a computer system or the like which is provided with a PCI Express interface and a power source supply device.

The controller unit adjusts synchronization of data signals transmitted received between the PCI Express host interface unit and the memory disk unit to control a data transmission reception speed between the PCI Express host interface unit and the memory disk unit .

As depicted a PCI e type RAID controller can be directly coupled to any quantity of SSDs . Among other things this allows for optimum control of SSDs . The use of a RAID controller 

Referring now to a diagram schematically illustrating a configuration of the high speed SSD is shown. As depicted SSD memory disk unit comprises a host interface e.g. PCI Express host which can be interface of or a separate interface as shown a Direct Memory Access DMA controller interfacing with a backup controller an ECC controller and a memory controller for controlling one or more blocks of memory that are used as high speed storage. Also shown are backup controller coupled to DMA controller and backup storage unit A coupled to backup controller .

In general DMA is a feature of modern computers and microprocessors that allows certain hardware subsystems within the computer to access system memory for reading and or writing independently of the central processing unit. Many hardware systems use DMA including disk drive controllers graphics cards network cards and sound cards. DMA is also used for intra chip data transfer in multi core processors especially in multiprocessor system on chips where its processing element is equipped with a local memory often called scratchpad memory and DMA is used for transferring data between the local memory and the main memory. Computers that have DMA channels can transfer data to and from devices with much less CPU overhead than computers without a DMA channel. Similarly a processing element inside a multi core processor can transfer data to and from its local memory without occupying its processor time and allowing computation and data transfer concurrency.

Without DMA using programmed input output PIO mode for communication with peripheral devices or load store instructions in the case of multi core chips the CPU is typically fully occupied for the entire duration of the read or write operation and is thus unavailable to perform other work. With DMA the CPU would initiate the transfer do other operations while the transfer is in progress and receive an interrupt from the DMA controller once the operation has been done. This is especially useful in real time computing applications where not stalling behind concurrent operations is critical.

Referring now to the controller unit of is shown as comprising a memory control module which controls data input output of the memory disk unit a DMA control module which controls the memory control module to store the data in the memory disk unit or reads data from the memory disk unit to provide the data to the host according to an instruction from the host received through the PCI Express host interface unit a buffer which buffers data according to the control of the DMA control module a synchronization control module which when receiving a data signal corresponding to the data read from the memory disk unit by the control of the DMA control module through the DMA control module and the memory control module adjusts synchronization of a data signal so as to have a communication speed corresponding to a PCI Express communications protocol to transmit the synchronized data signal to the PCI Express host interface unit and when receiving a data signal from the host through the PCI Express host interface unit adjusts synchronization of the data signal so as to have a transmission speed corresponding to a communications protocol for example PCI PCI x or PCI e and the like used by the memory disk unit to transmit the synchronized data signal to the memory disk unit through the DMA control module and the memory control module and a high speed interface module which processes the data transmitted received between the synchronization control module and the DMA control module at high speed. Here the high speed interface module includes a buffer having a double buffer structure and a buffer having a circular queue structure and processes the data transmitted received between the synchronization control module and the DMA control module without loss at high speed by buffering the data and adjusting data clocks.

Referring now to a more detailed diagram of a backup and restoration system for a SSD is shown. As first depicted in system is shown comprising an alarm unit coupled to backup controller and a main controller unit coupled to a storage device controller which itself is coupled to disk storage units and a set one or more of SSD memory disk units hereinafter SSDs . further shows a primary power supply coupled to an uninterruptable power supply UPS for providing primary power to system . Still yet under the present invention a secondary power supply is coupled to SSD backup controller a backup storage device A and an at least one SSD memory disk unit .

In general alarm unit and secondary power supply is activated in response to a deactivation of primary power supply . When this happens backup controller backs up SSD data stored on the SSDs to backup storage device A. Under this embodiment secondary power supply and optionally alarm unit is deactivated when the backup of the SSD data is complete. Then when primary power supply is reactivated backup controller restores the SSD data to the SSDs from backup storage device A.

This embodiment is shown in greater detail in conjunction with the single SSD system of . Similar to system of system comprises an alarm unit coupled to SSD backup controller a main controller unit coupled to a storage device controller which itself is coupled to main memory cache a flash SSD a high density drive HDD and a double data rate DDR SSD . further shows a primary power supply coupled to an uninterruptable power supply UPS for providing primary power to system . Still yet under the present invention a secondary power supply is coupled to SSD backup controller and a backup storage device A as well as main memory and DDR SSD .

In general alarm unit and secondary power supply is activated in response to a deactivation of primary power supply . When this happens backup controller backs up SSD data stored on the SSDs see as well as main memory data from main memory to backup storage device A. Under this embodiment secondary power supply and optionally alarm unit is deactivated when the backup of the SSD data is complete. Then when primary power supply is reactivated backup controller restores the SSD data to the SSDs and main memory data to main memory from backup storage device A.

In general alarm units A B and secondary power supply are activated in response to a deactivation of primary power supply . When this happens backup controller backs up SSD data stored on the SSDs storage system data from main memory of storage system and server data from main memory of host server to backup storage device A. Under this embodiment secondary power supply and optionally alarm units A B is deactivated when the backup of the SSD data is complete. Then when primary power supply is reactivated backup controller restores the SSD data the storage system data and the server data to the SSDs main memory of storage system and main memory of host server respectively

Referring back to auxiliary power source unit may be configured as a rechargeable battery or the like so that it is normally charged to maintain a predetermined power using power transferred from the host through the PCI Express host interface unit and supplies the charged power to the power source control unit according to the control of the power source control unit .

The power source control unit supplies the power transferred from the host through the PCI Express host interface unit to the controller unit the memory disk unit the backup storage unit A B and the backup control unit .

In addition when an error occurs in a power source of the host because the power transmitted from the host through the PCI Express host interface unit is blocked or the power transmitted from the host deviates from a threshold value the power source control unit receives power from the auxiliary power source unit and supplies the power to the memory disk unit through the controller unit .

The backup storage unit A B is configured as a low speed non volatile storage device such as a hard disk and stores data of the memory disk unit .

The backup control unit backs up data stored in the memory disk unit in the backup storage unit A B by controlling the data input output of the backup storage unit A B and backs up the data stored in the memory disk unit in the backup storage unit A B according to an instruction from the host or when an error occurs in the power source of the host due to a deviation of the power transmitted from the host deviates from the threshold value.

The storage device of a serial attached small computer system interface serial advanced technology attachment PCI Express type supports a low speed data processing speed for a host by adjusting synchronization of a data signal transmitted received between the host and a memory disk during data communications between the host and the memory disk through a PCI Express interface and simultaneously supports a high speed data processing speed for the memory disk thereby supporting the performance of the memory to enable high speed data processing in an existing interface environment at the maximum.

While the exemplary embodiments have been shown and described it will be understood by those skilled in the art that various changes in form and details may be made thereto without departing from the spirit and scope of this disclosure as defined by the appended claims. In addition many modifications can be made to adapt a particular situation or material to the teachings of this disclosure without departing from the essential scope thereof. Therefore it is intended that this disclosure not be limited to the particular exemplary embodiments disclosed as the best mode contemplated for carrying out this disclosure but that this disclosure will include all embodiments falling within the scope of the appended claims.

The foregoing description of various aspects of the invention has been presented for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed and obviously many modifications and variations are possible. Such modifications and variations that may be apparent to a person skilled in the art are intended to be included within the scope of the invention as defined by the accompanying claims.

