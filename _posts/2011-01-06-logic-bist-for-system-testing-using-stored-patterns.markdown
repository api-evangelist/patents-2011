---

title: Logic BIST for system testing using stored patterns
abstract: A stored-pattern logic self-test system includes a memory, a device under test and a test controller. The memory stores test pattern data including test stimuli. The device under test includes a scan chain and a test access port configurable to control operation of the scan chain. The test controller is configured to test the device under test by controlling the memory to output the test stimuli to the device under test. The test controller controls the test access port to load the test stimuli into the scan chain, and receives and evaluates response data from the device under test.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08473792&OS=08473792&RS=08473792
owner: LSI Corporation
number: 08473792
owner_city: Milpitas
owner_country: US
publication_date: 20110106
---
This application is directed in general to an electronic device and more specifically to self testing thereof.

An electronic device such as an integrated circuit IC sometimes includes self test circuitry that may be used to determine device functionality of the IC before or after deployment of the device in a product. The self test circuitry may include scan chains typically used to test combinatorial logic on the IC. The scan chains are typically configured with a series of test patterns to test functionality of the IC at the end of the manufacturing line before the IC is shipped to a customer.

One embodiment provides a stored pattern logic built in self test SP LBIST system. The system includes a memory a device under test DUT and a test controller. The memory stores test pattern data including test stimuli. The DUT includes a scan chain and a test access port configurable to control operation of the scan chain. The test controller is configured to test the DUT by controlling the memory to output the test stimuli to the DUT. The test controller controls the test access port to load the test stimuli into the scan chain and receives and evaluates response data from the DUT.

Another embodiment provides a method of manufacturing an SP LBIST system. The method includes configuring a memory to store test pattern data that includes test stimuli. A DUT includes a scan chain and a test access port TAP configurable to control operation of the scan chain. The DUT is configured to receive the test stimuli. A test controller is configured to test the DUT by controlling the memory to output the test stimuli to the DUT and to control the TAP to load the test stimuli into the scan chain. The test controller is further configured to receive and evaluate response data from the DUT.

Another embodiment provides an integrated circuit IC . The IC includes scan chains and a TAP. The scan chains are configured to receive test stimuli and to apply the test stimuli to combinatorial logic. The TAP is configured to control operation of the scan chains. A test controller is configured to test the combinatorial logic by receiving TAP instructions from a memory and to control operation of the test access port in accordance with the TAP instructions. The test controller is further configured to receive and evaluate response data from the scan chains.

Another embodiment provides a SP LBIST system for testing a DUT the DUT including a scan chain and a TAP configurable to control operation of the scan chain. The system includes a memory and a test controller. The memory is configured to store test pattern data that include test stimuli. The test controller is configured to test the DUT by 1 controlling the memory to output the test stimuli to the device under test 2 controlling the test access port to load the test stimuli into the scan chain and 3 receiving and evaluating response data from the device under test.

Many complex IC devices include a scan chain used to functionally test the IC. The scan chain is typically used to test combinatorial logic during an end of line test. A tester system typically provides test patterns to the scan chains and reads test results from the scan chain. Such testing is useful for detecting and sequestering ICs that include fatal manufacturing defects and ICs that may suffer from early failure after a short period of operation. In many cases after the IC leaves the manufacturing facility the scan chain is thereafter unused.

This disclosure benefits from the recognition by the inventor that the scan chain infrastructure on the IC may be advantageously used after the IC leaves the manufacturing environment. Test patterns may be stored in a nonvolatile memory associated with the IC. On device startup or periodically a controller associated with the IC may initiate and manage a test of the DUT using the test patterns. The results of the test may be used to modify operation of the IC such as reporting the test error or disabling further operation of the IC to prevent generation of spurious results in the system employing the IC.

The conventional LBIST suffers from several weaknesses that limit its practicality for use in integrated circuits. First the LBIST typically requires special design rules to isolate the logic being tested. Such isolation is intended to ensure that the LBIST remains in a deterministic state. Additional logic to implement the isolation is design dependent. Second sometimes significant changes to the DUT are required to accommodate the LBIST . Such changes may among other adverse results compromise design timing closure. Third the set of pseudo random numbers generated by the LFSR is closed and may not produce a particular pattern needed to test a particular logic path. Faults related to untested paths may therefore remain undetected.

A memory stores deterministic test patterns described in detail below. In some embodiments the memory is nonvolatile. The contents of the memory may be stored in any desired order or configuration. In one convenient embodiment the memory is 64 bits wide e.g. eight 8 bit wide PROMS. Those skilled in the pertinent art are familiar with the many variants of nonvolatile memory available. The test patterns may be stored in the memory prior to installation of the memory in the system . For example when the memory is an EPROM multiple instances of the memory may be produced and stored with one of the stored programmed memories being installed prior to shipment of the system to an end user. Alternatively the memory may be programmed by any well known technique after installation.

The memory communicates with a device under test DUT and a test controller . The test controller includes a finite state machine FSM configured to execute control instructions. The memory DUT and test controller may be discrete devices or may be integrated on a single common substrate. For example the memory test controller and DUT may all be located on a same substrate such as a circuit board or silicon die the memory may be external to the DUT or both the memory and the test controller may be external to the DUT . In the illustrated embodiment the memory DUT and test controller are illustrated without limitation as being discrete devices with the DUT being located on a chip .

The DUT may include multiple domains. Each domain includes its own scan test architecture that may be used to test the particular DUT using automatic test equipment ATE during manufacturing and at an end of line test prior to installing the DUT into a system. The domains may each be clocked and tested separately. Such domains are referred to herein as clock domains as discussed further below. Embodiments of the disclosure are non intrusive in that domains may be used to test the DUT after the end of line test without modifying the design of the domains.

The test controller receives a test start signal SYS TEST START and a clock signal SYS TEST CLK. The SYS TEST START and SYS TEST CLK inputs are external input signals meaning they are received from outside the system . The SYS TEST START and SYS TEST CLK signals may be provided e.g. by a high level controller not shown that places the DUT into self test mode periodically or upon demand by a user of the DUT . The SYS TEST START signal initiates the test of the DUT while the SYS TEST CLK signal provides a test clock at a desired frequency. While not limited to any particular frequency the SYS TEST CLK may be e.g. about 40 MHz. The test controller includes an MISR discussed further below.

During test the test controller controls the memory and a data multiplexer to provide test stimuli from the memory to the DUT . The data path from the memory to the multiplexer is illustrated for the purpose of discussion as being 32 bits wide. Similarly the test controller controls the memory to provide e.g. mask bits TAP instructions and a golden signature to the test controller . The data path for the memory and the test controller is also illustrated for the purpose of discussion as being 32 bits wide. The test controller also controls a multiplexer to provide control signals from the test controller to the DUT . This data path may also be 32 bits wide. Of course it will be immediately apparent to those skilled in the art that embodiments having other data path widths e.g. 16 or 64 bits are within the scope of the disclosure.

Within the DUT an embedded deterministic test EDT decompacter receives the test stimuli from the multiplexer . The test stimuli may be highly compressed e.g. 100 or more. The EDT decompacter decompresses the test stimuli and provides the decompressed stimuli to a number of test modules . . . referred to collectively as test modules that include scan chains. The scan chains may be of any conventional or novel design. The test modules may be LBIST modules but embodiments herein are not limited thereto. While not limiting the DUT to any particular number of test modules some designs may include 600 scan chains such as those described previously. An EDT compacter receives the scan chain responses from the test modules compacts the responses and provides the compacted responses to the MISR within the test controller .

A TAP under control of the test controller coordinates the operation of the EDT decompacter the test modules and the EDT compacter . Such coordination may include the operation of the other control signals generated and applied through a complex of multiplexers represented generally by the multiplexer . In one embodiment the test controller obtains the TAP instructions from the memory at the beginning of a test cycle and issues TAP control signals to the TAP to configure the DUT for the test.

The MISR generates a test signature associated with the test stimuli provided to the DUT . The memory provides mask bits to the MISR to mask off bits within the compacted responses that have an unknown or don t care status. Those skilled in the pertinent art appreciate that such masking may be used in conjunction with efficient implementation of compaction of the test responses.

The test controller obtains the golden signature stored in the memory . If the test signature fails to match the golden signature the test controller asserts a test result signal SYS TEST FAIL to indicate the mismatch. When the test of the DUT is complete the test controller also asserts a test completion signal SYS TEST DONE. The SYS TEST FAIL and SYS TEST DONE signals are external output signals meaning they are configured to convey the status of the self test to an entity outside the system such as a high level controller.

Thus the system may operate with only four input output I O signals. In the illustrated embodiment only two external input signals SYS TEST START and SYS TEST CLK are received by the test controller . Similarly only two external output signals SYS TEST DONE and SYS TEST FAIL are provided by the test controller .

In some embodiments the TAP may initiate a system test of the DUT for example after the expiration of a time period since a previous test or on system startup. The TAP may control the SYS TEST START signal and monitor the SYS TEST FAIL and the SYS TEST DONE signals as they are generated by the system test controller .

A test data start address field holds a beginning location within the memory of a test data block e.g. the test stimuli used to populate the scan chains within the DUT . Between the test data start address field and the test data block are test control parameters . The test control parameters include a scan chain length field . The scan chain length field describes the length of the scan chains in the DUT . Each test data block is associated with one of the test modules in . For a particular test data block some information specific to the associated test module is typically stored in a domain configuration block . As an example the illustrated embodiment includes i three TAP instructions and to reset and lock a phase locked loop PLL associated with that particular test module ii a number of individual tests for that particular module in a pattern count field iii a Golden Signature expected to be output by the MISR if the modules operate properly and iv additional test configuration information associated with the test configuration for the module . In general the test data blocks associated with different ones of the test modules will differ from each other.

The structure of the domain configuration block may be repeated for each clock domain within the DUT . Illustratively a domain configuration block is shown for a second domain e.g. CLK DOMAIN 1 and a domain configuration block for an Mdomain CLK DOMAIN m.

The structure of the test control configuration block may be repeated for as many test configurations as desired. Illustratively a last test control configuration block the nconfiguration block is shown. The test control configuration blocks need not configure every available clock domain within the DUT for a particular test.

A first domain test configuration includes test pattern data for a first test configuration CONFIG 0 and the first clock domain CLOCK DOMAIN 0. Herein test pattern data may refer to pattern stimuli pattern masks corresponding to the pattern stimuli or both. A data field and a data field are located at a first memory address of the test data block . The data field occupies the most significant 32 bits of the address location while the data field occupies the least significant bits of that location. In the illustrated embodiment the data field is unused and the data field contains a first pattern stimulus.

A data field and a data field are located at a second memory address of the test data block . The data field occupies the most significant 32 bits of the address location while the data field occupies the least significant bits of that location. The data field contains a first pattern mask corresponding to the first pattern stimulus in the data field . The data field contains a second pattern stimulus. A data field at the next sequential address contains a second pattern mask corresponding to the second pattern stimulus.

The placement of subsequent pattern stimuli and pattern masks follows the pattern exemplified by the first pattern stimulus and the first pattern mask with each pattern stimulus being located in the 32 most significant bits of a particular address of the memory and the corresponding pattern mask being located in the least significant bits of the subsequent address. A data field contains the pattern mask corresponding to the penultimate pattern stimulus of the first domain test configuration . A data field contains the final pattern stimulus while a data field contains the corresponding final pattern mask. A data field is unused.

A second domain test configuration follows the first domain test configuration and includes pattern stimulus and pattern mask data for the CLK DOMAIN 2. As many subsequent domain test configurations follow as needed ending with a final domain test configuration . The domain test configurations and and any domain test configurations between the domain test configurations form a first test configuration block . Any number of additional test configuration blocks may follow the first test configuration block ending with a final domain test configuration block . Each additional test configuration block may be formatted as illustrated by the first test configuration block .

Returning to the clock select logic under control by the TAP selects between the launch capture clocks output by the PLL TDF controls for output to one of two test configurations CONFIG A and CONFIG B . The test configurations also each receive test access mechanism TAM configuration signals from the TAP . Each test configuration includes a number of EDT design blocks that include scan chains. The EDT design blocks need not be identical. Each test configuration further receives TEST STIMULI a SCAN ENABLE signal and a SCAN CLOCK under control by the test controller . Upon completion of a test scan the test configuration under test provides TEST RESPONSE to the test controller .

Those skilled in the pertinent art will appreciate that scan DFT system including the two PLLs and the two test configurations are illustrative and do not limit embodiments of the disclosure. Systems of the disclosure e.g. the system may include any number of PLLs and configurations including appropriate control signals and timing relationships as appropriate to the particular design implementation.

In a step the FSM initializes various parameters of the system including parameters NUM CONFIG and NUM CLK DOMAIN and loop counters CURRENT CONFIG and CURRENT CLK DOMAIN. NUM CONFIG and NUM CLK DOMAIN may respectively represent the number of test configurations and the number of clock domains the system is configured to support. CURRENT CONFIG and CURRENT CLK DOMAIN may be set to an initial value of zero. In a decisional step the FSM tests the value of CURRENT CONFIG. If CURRENT CONFIG is not greater than NUM CONFIG the method advances to a decisional step . In the step the FSM tests the value of CURRENT DOMAIN. If CURRENT DOMAIN is not greater than NUM DOMAIN then the method advances to a step .

In the step the first TAP instruction is read from the memory and copied to the TAP . A PLL reset signal PLL RESETN is reset. Referring to the step corresponds about to a time T. Shortly thereafter the reference clock outputs of the PLLs stabilize.

In a step the second TAP instruction is read from the memory and copied to the TAP . The PLL RESETN signal is then set. Referring to the step corresponds about to a time T.

In a step the third TAP instruction is read from the memory and copied to the TAP . The PLL RESETN signal is maintained in a set state. Referring to the step corresponds about to a time T.

In a decisional step the FSM tests the SYS PLL LOCK signal. If SYS PLL LOCK indicates one or more of the PLLs has failed to lock then the method branches to the step and tests SYS PLL LOCK again. The step may repeat until SYS PLL LOCK indicates the PLLs are both locked or until a timeout directs the method to an error handling step not shown .

Returning to the method next advances to a decisional step . In the step a PATTERN COUNT is compared to a PATTERN SIZE. PATTERN SIZE refers to the value stored by the pattern count field e.g. the size of the test pattern used for the clock domain under test. PATTERN SIZE may be initially set to zero during the step .

If PATTERN COUNT is not greater than the PATTERN SIZE the method advances to a step . In the step the MISR is initialized and a variable SHIFT COUNT is reset to zero.

In a decisional step SHIFT COUNT is compared to a test parameter SCAN CHAIN LENGTH. SCAN CHAIN LENGTH is a length of the scan chain and therefore also the number of test stimuli to be read from the memory for the present test. The SCAN CHAIN LENGTH may be stored in the memory e.g. in the scan chain length field .

In a step a test stimulus read from the memory is shifted into the scan chain. SHIFT COUNT is then incremented. The method loops between the steps until SHIFT COUNT exceeds SCAN CHAIN LENGTH at which time the method branches to a step .

In the step the test controller initiates the test using the stimuli previously loaded into the scan chain such as by asserting PLL TDF CLOCK TRIGGER . As described previously the test stimuli are applied to the tested logic within the DUT and test results are obtained. Test results are shifted out of the scan chain and into the MISR . PATTERN COUNT is incremented and control returns to the step .

PATTERN COUNT exceeds PATTERN SIZE when the test pattern has been completely read out to the DUT . At this time the method branches to a decisional step . At this step the MISR may evaluate the test signature by determining if the test signature is equal to the Golden Signature FIG. . If the test signature is equal to the Golden Signature the method advances directly to a step increments CURRENT CLK DOMAIN and returns control to the step . On the other hand if the test signature does not equal the Golden Signature the method branches to a step in which TEST FAIL is set indicating a test failure. In the illustrated embodiment the method advances from the step to the step . In other embodiments the method may instead advance to an error handling routine which may perform any appropriate action such as storing information regarding the failing test pattern and or stopping the test.

The method repeats the loop until CURRENT CLK DOMAIN exceeds NUM CLK DOMAIN. When this occurs the method branches to a step in which CURRENT CONFIG is incremented and CURRENT CLK DOMAIN is reset. Control then returns to the step . The method repeats the loop until CURRENT CONFIG exceeds NUM CONFIG. When this occurs the method concludes with a terminating step .

Turning to illustrated is an embodiment of a system modified for the case that the test controller and the DUT are located on a same semiconductor substrate e.g. integrated circuit IC . In this embodiment multiplexers under control by the test controller alternatively provide operational data or test data to I O pins of the IC . For example a multiplexer provides a path for test stimuli from the memory or operational data to the DUT . A multiplexer provides a path for test mask bits from the memory or system data to the test controller . Similarly a multiplexer provides a path for test control data or external data to the DUT and a multiplexer provides a path for TAP control data or external data to the DUT .

The I O pin reduction exemplified by the system is particularly advantageous in large scale integrated devices for which pin count may be large. In the illustrated embodiment only four additional I O pins are needed to implement the SP LBIST scheme. Moreover by providing serial data input to the DUT the impact of the SP LBIST scheme on the design of the DUT is minimized.

In a step the memory is configured to store test pattern data e.g. test stimuli and pattern masks. The test pattern data may be stored in a manner such as that described by . In a step a device under test such as the DUT is configured to receive the test stimuli. The device under test includes a scan chain and a test access port e.g. the TAP that is configurable to control operation of the scan chain.

In a step a test controller e.g. the test controller is configured to test the DUT by controlling the memory to output the test stimuli to the DUT. The test controller is further configured to control the TAP to load the test stimuli into the scan chain and to receive and evaluate response data from the DUT. In various embodiments the test controller is capable of performing the test upon receiving only two external input signals and providing test results with only two external output signals.

In an optional step a clock signal is provided to a shift register such as the shift register . The shift register is configured to receive mask bits in serial form from the memory and to output parallel mask bits. In another optional step a reduced frequency clock derived from the clock signal is provided to a multiple input signature register such as the MISR . The multiple input signature register may be configured to receive the response data from the DUT and to receive the parallel mask bits. In another optional step a shift register such as the shift register is configured to receive the test stimuli in serial form from the memory and to provide parallel test stimuli bits to the DUT.

Those skilled in the art to which this application relates will appreciate that other and further additions deletions substitutions and modifications may be made to the described embodiments.

