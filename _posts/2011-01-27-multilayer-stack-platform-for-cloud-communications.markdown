---

title: Multi-layer stack platform for cloud communications
abstract: A multi-layer stack platform is provided for cloud communication connections and services between devices. The system includes three or more layers, including a directory component, an applications component, and a peering component. An interconnection component may also be provided for communication between the applications component and the peering component. The components operate to provide communication services, such as sessions, according to the functionality of a selected application by adhering to device, user, and routing rules and preferences. The device, user, and routing rules and preferences are maintained in and processed by the directory component. The applications component receives communication session requests and accesses corresponding application scripts to perform the requested session. The peering component receives the device, user, and routing rules and preferences, and establishes connection between devices based on the rules and preferences as defined by the directory component.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08171160&OS=08171160&RS=08171160
owner: IntelePeer, Inc.
number: 08171160
owner_city: San Mateo
owner_country: US
publication_date: 20110127
---
This application is a continuation of U.S. application Ser. No. 12 909 481 entitled Multi Layer Stack Platform for Cloud Communications filed on Oct. 21 2010 the content of which is incorporated herein in its entirety.

This disclosure relates generally to cloud communication connections. More particularly the disclosure relates to a multi layer stack platform that implements cloud communication connections between various devices and or networks.

A communications carrier or service provider offers communications access such as voice video and data communications to customers. A customer purchases service from the communications carrier or communications service provider to gain communications network access for one or more communication devices owned or operated by the customer. The communication devices can include any device capable of transmitting or receiving voice video and or data including but not limited to telephones smart phones mobile phones personal digital assistants PDAs computers FAX machines Internet enable devices media players set top boxes email devices video phones etc.

During the process of establishing cloud communication connections between devices multiple network components are typically utilized. Such network components may include various forms of communication networks and equipment including but not limited to switches routers hubs repeaters bridges servers etc. These network components are disparate elements and as such communication and message transmission between components is not streamlined and may be inefficient.

Accordingly there is a need and desire for an improved platform for establishing communication services such as communication sessions between devices.

A system for providing cloud communication connections between devices connected to one another through one or more networks includes according to an embodiment a directory component an applications component and a peering component. The directory component stores information including user information and routing information in data sources. The directory component further determines a routing policy for a communication session between an origination user and a destination user based upon the user and routing information. The determination of a routing policy includes selecting a destination device and the routing policy includes information related to an origination device the selected destination device and a route therebetween. The applications component is configured to receive a communication session request from an origination device for a communication session with the destination user. The applications component is further configured to create a communication message that includes information related to the requested communication session by accessing application scripts and selecting an application script. The peering component is responsible for establishing a connection between the devices to provide for the communication session to be conducted. The peering component is configured to receive the communication message and the routing policy and to perform the communication session by connecting the origination device and the selected destination device. The connection adheres to the routing policy and the selected application script.

A method for providing communication connections between devices includes maintaining user information and routing information at a directory component. The method further includes receiving a request to perform a communication session between an origination device and a destination user where the request is received at an applications component by a user accessing an application via the origination device. The applications component identifies the requested communication session to be executed and creates by accessing application scripts a communication message with information related to the requested communication session. The directory component determines a routing policy for the communication session based upon user and routing information including selecting a destination device. The communication message as well as the routing policy are transmitted to a peering component. The peering component performs the communication session by connecting the origination device and the selected destination device and adhering to the routing policy and a selected application script.

With reference to a block diagram illustrates an exemplary system for providing cloud communication connections and services between devices connected to one another through one or more networks according to an embodiment. The system may include one or more layers and in is illustrated an embodiment comprising three layers a directory layer or directory component an applications layer or applications component and a peering layer or peering component . The three components and described in greater detail below may communicate with one another through application programming interfaces APIs and session initiation protocol SIP messaging for example as described in greater detail below. Together the three components operate to provide cloud communication services such as communication sessions according to the functionality of a selected application by adhering to device user and routing rules and preferences.

The directory component is generally responsible for managing and maintaining information relating to end points i.e. devices networks and routing policies. The directory component is a policy based routing engine that stores and maintains directory or registry entries that include user information as well as routing information and that utilizes both the user and routing information to determine a routing policy for a communication session.

A directory entry may be associated with a corresponding device and may include one or more of a device identifier user preferences and routing attributes. Alternatively a directory entry may be associated with a particular user who has a plurality of devices thus the directory entry for the particular user may include information for the plurality of devices such as a device identifier and user preferences for each device of the corresponding user.

Routing information may include for example one or more of routing options that are based on quality level established for a device cost constraints established for a device time constraints established for a device and registration of the device for direct call connection. User information may include user preferences such as for example identification of undesirable traffic types time and date settings and or availability of devices.

The directory entries including user information may be provided by users and or various providers. For example a user may create a directory entry through a browser or other suitable interface. A user may input or otherwise provide information relating to their preferences for particular communication sessions such as how to communicate with a particular device at a particular time of day. Various parts of the user information may be automatically obtained by the directory component when a particular device is registered with a service provider. For example a service provider may automatically provide the device identifier of a user s device for incorporation in a corresponding directory entry.

With reference to the directory component according to an embodiment is illustrated. The directory component includes a first application program interface API for communicating with devices and network components relating to various user records or specifications i.e. the user directory entries . The directory component includes a data portion including various data sources in which information relating to user preferences user groups user registrations to various services and the like are stored. The data portion also includes various data sources containing the routing information.

For example as shown in the data portion of the directory component includes routing data sources containing routing information such as routing peering management traffic behaviour and monitoring and quality of service. Examples of the data sources include a LERG PSTN local exchange routing guide public switched telephone network data source that indicates optimal routing preferences for devices that communicate via the PSTN a pricing data source that indicates pricing considerations for the devices a route cost data source that includes information related to the cost for utilizing various routes between devices a LNP local number portability data source refers to information that defines a current ported status of an E.164 number a feature data source indicates communication routing to occur based on best match features between devices a direct peers data source indicates if a particular user device is registered for direct call connection or similar services a federations user groups data source defines groups of parties or federations for certain types of communications a route way blocking data source includes information relating to undesirable communication types and numbers and route quality data source allows for the specifying of a desired quality level for communications.

With further reference to the data portion of the directory component includes user data sources containing user information such as preferences presence and capability. Examples of the user data sources include a user preferences data source that indicates user criteria such as time of day day of week and call screening for example a presence data source may define a preference of whether a call or communication session may occur based on the endpoint being available and a capability data source and a capability data source may define the various capabilities of a particular device such as voice text message and video capabilities.

Fewer or more data sources may be included in the data portion . Furthermore a directory entry for a particular device need not indicate a record for each category. Moreover information in the data portion may include information for a plurality of user devices for a particular user.

The routing information and user information contained in the various data sources may thus define one or more routes between devices resulting in a routing policy for a particular communication session. The one or more routes may be ranked and the ranking may be based on various criteria such as one or more of transmission cost transmission time and or quality as examples. According to an embodiment a route that is utilized for a communication session between devices may be the highest ranked route that is available. According to an additional embodiment the utilized route may be the route that first completes a connection between the devices. Thus according to this embodiment connection over several routes may be attempted until a connection is secured. The other attempted connections may then be dropped.

The directory component thus provides the functionality for establishing a routing policy including the selection of a destination device out of a plurality of destination devices. The directory component includes a policy engine which is a processor that obtains the relevant routing and user information and determines the routing policy.

As an example a user of an origination device may desire communication with a particular end user in which the type of communication i.e. voice text video and the destination device is not a concern to the origination user. The policy engine utilizes the routing information and the user information contained in the data sources to determine the most suitable destination device and route for the communication with the user of the origination device. The determination of the destination device provides for the desired communication to be established with a destination user while various details such as the device and route remain anonymous to the origination user.

The directory component also includes various APIs for providing internal and external networks and components such as the peering component with the routing policy as established by the policy engine . The APIs may include a SIP API an ENUM e.g. telephone number mapping API and a routing API for example.

Now with reference to the applications component is illustrated. The applications component is generally responsible for recognizing and initiating various application requests. When an application is accessed by a user via a user device to perform a corresponding communication session the applications component receives and identifies a communication session request. The applications component is further configured to create a communication message including information related to the requested communication session.

With reference to the applications component includes an API for communicating with various devices and network components. The applications component also includes a plurality of application scripts . Alternatively or additionally a remote script server not shown may include one or more application scripts for access by the applications component . An application script is a set of instructions which when executed cause specific actions to occur such as establishing a communication session between two or more devices according to information contained in the script. The applications component creates the communication message related to a requested communication session by accessing one or more application scripts and selecting an application script for the communication session.

Examples of applications as defined by corresponding application scripts include but are not limited to click to call which provides a voice connection between endpoints short message service SMS messaging which provides messaging capabilities between endpoints blast SMS which provides a mass delivery of outbound messages blast voice which delivers media to one or more endpoints auto conference for scheduling automatic dialing for conference call bridging dialed number translation for mapping local numbers to termination points number rental which allows for numbers to be rented reporting for usage and performance reporting for API generated calls real time call events for allowing call progress to be reported to various applications recording which delivers recordings scripted interactive voice response IVR which allows users to define IVRs to be applied to voice calls transcription for allowing conversations to be transcribed and delivered media management which allows media to be converted and included in call sessions and video messaging which allows for video sessions to be established and conducted.

With reference to the peering component according to an embodiment is illustrated. The peering component is generally responsible for managing the physical connections and capabilities between networks thereby providing the actual connections between devices or endpoints. The peering component performs the connection between devices by adhering to the routing policy determined by the policy engine based upon the routing and user information. The peering component is configured to receive the communication message identifying the requested communication session as well as the routing policy and perform the communication session by connecting the origination and destination devices while adhering to the routing policy and application script.

The peering component includes a routing network that routes the communication sessions to connect two or more devices. In routing the communication sessions the peering component utilizes the user and routing information as described above with respect to the directory component . That is for example the peering component may connect a communication session over a route that is defined as the preferred or optimal route or may drop a call if the call type is defined as undesirable or may route the session to a secondary device at a certain time of day i.e. adhering to the routing policy .

The peering component may utilize various types of carriers or providers such as enterprise federation partners application service provider internet service provider ASP ISP and peering partners as well as networks and exchange carriers such as competitive local exchange carriers CLECs local exchange carriers LECs and PSTN. Thus according to an embodiment the peering component is configured to connect to multiple networks and exchange carriers for establishing the communication session and connecting the devices. Moreover the peering component may connect directly to various destination devices or to a service provider of the destination device for routing communications to the destination device.

Additionally the peering component supports various technologies and call types such as but not limited to voice video instant messaging and SMS messaging. The peering component may perform signaling protocol conversion. Endpoints or devices may employ different signaling protocols that are conducive to the applications and operation of the device. If a call or communication session is being transmitted between two devices it may be necessary to transcode or convert the call to a format that is compatible with the destination device. Thus the peering component may determine the signaling protocol of each endpoint and convert the call to a format compatible with the signaling protocol of the destination endpoint if its signaling protocol differs from that of the origination endpoint. Examples of signaling protocols may include but are not limited to IP time division multiplexing TDM and SS7.

According to an additional embodiment as illustrated in the block diagram provided in a system for providing cloud communication connections between devices includes an additional layer or component interconnection component . The interconnection component may act as an intermediary between the applications component and the peering component . For example the applications component may transmit the generated communication message based upon the requested communication session to the interconnection component for subsequent transmission to the peering component . Additionally if the applications component obtains the routing policy from the directory component this information may also be provided to the interconnection component for subsequent transmission to the peering component . The interconnection component includes an API for handling such communications and transmissions. The interconnection component although shown in as a separate remote component may according to additional embodiments be integrated with one or more other components such as the peering component or the directory component .

The components and may each include according to various embodiments a processing element embodied as a processor a co processor a controller or various other processing means or devices including integrated circuits. The components and may include communication interface elements for communication with other devices and components. The communication interface elements may be a device or means embodied in hardware software or a combination that is configured to receive and transmit data between the components and and other devices and components in multiple networks. Each components and may also include one or more memory elements including volatile or non volatile memory for storing information instructions or the like to enable the corresponding components and to perform various functions. Alternatively or additionally the components and may communicate with remote memory elements stored on a server or the like.

With reference to a flow chart of a method for providing cloud communication connections according to an embodiment is illustrated.

At information in data sources is maintained by the directory component . The information includes user information and routing information and the information related to a particular user comprises a directory entry.

At a request for a communication session is received by the applications component . The communication session request is generated by a user s device when an application is accessed by an origination user via the user device to perform a corresponding communication session.

At the applications component creates a communication message that includes information related to the requested communication session. The communication message is created by accessing one or more relevant application scripts stored in the applications component or at a remote server and by selecting an application script for the communication session. The application scripts define the functionality of the requested communication session such as a text message or conference call for example.

At a routing policy for the communication session between the origination user and a destination user based upon user information and routing information related to the users is determined. The determination includes selecting a destination device. The routing policy includes information related to the origination device the selected destination device and a route therebetween.

At the communication message and the routing policy are transmitted to the peering component via an application programming interface such as an API . The applications component may obtain the associated routing policy which may be provided directly to the peering component or through the interconnection component . Similarly the applications component may provide the communication message to the interconnection component for transmission to the peering component or may directly provide the communication message to the peering component . The peering component may query the directory component through for example a SIP message to obtain the routing policy for the communication session.

At the peering component performs the requested communication session by connecting the origination and destination devices and adhering to the determined routing policy and the selected application script.

With reference to endpoints and are illustrated with the exemplary system. The endpoints and may be one or more of a variety of communication devices such as for example and without limitation a standard telephone a cellular phone or other wireless device a computer a PDA a voice over Internet protocol VoIP phone a soft phone a video phone or the like. Thus one endpoint or may include various devices each associated with a particular user.

A client application resides on the endpoints and allowing user s of the endpoints and to initiate and participle in communication sessions with other endpoints. The client application may present a user interface to the user on the user endpoint allowing the user to request and participate in communication sessions. For example the user interface may include a virtual dial pad for dialing a telephone number. The user interface may be a browser window or other application window for example.

In operation the client application may use an API or framework to initiate and participate in communication sessions as requested by the user through for example the user interface Step . The communication request is received by the applications component . The applications component analyzes the communication request to identify the requested communication session to be executed.

The applications component transmits a request to the directory component to obtain a routing policy associated with the requested communication session for endpoints and and the requested routing policy is determined by and provided from the directory component to the applications component Step .

The applications component accesses one or more scripts and selects a script to perform the requested communication session. The selection of the script may be based on the routing policy. For example a video script may be selected if the routing policy indicates that a video communication session will occur between the devices.

Call information including the one or more scripts and the routing policy is transmitted to the interconnection component Step . The interconnection component upon receipt of the call information transmits via an SIP message the call information to the peering component Step .

The peering component transmits to the directory component a request for routing information i.e. the routing policy to be utilized between the endpoints and Step . With this information the peering component as described above establishes and manages the call connection between the endpoints and over a network such as the Internet by contacting endpoints and bridging calls implementing any necessary protocol conversions and managing exchanges between the endpoints and .

With reference to a second example implementation of a system such as the system of is illustrated. The process begins with the client application utilizing an API or framework to initiate and participate in a requested communication session as requested by the user of endpoint for example Step .

The applications component accesses one or more scripts from the script server to perform the requested communication session. Call information including the one or more scripts is transmitted to the interconnection component Step . The interconnection component upon receipt of the call information transmits via an SIP message the call information to the peering component Step .

The peering component transmits to the directory component a request for the routing policy Step . With this information the peering component establishes and manages the call connection between the endpoints and over a network.

As can be seen from the two example implementations provided in and the peering component may directly obtain the routing policy from the directory component the implementation shown in rather than the extra step of the applications component obtaining the routing policy and including it in the call information message to the interconnection component the implementation shown in .

The foregoing examples are provided merely for the purpose of explanation and are in no way to be construed as limiting. While reference to various embodiments are shown the words used herein are words of description and illustration rather than words of limitation. Further although reference to particular means materials and embodiments are shown there is no limitation to the particulars disclosed herein. Rather the embodiments extend to all functionally equivalent structures methods and uses such as are within the scope of the appended claims.

