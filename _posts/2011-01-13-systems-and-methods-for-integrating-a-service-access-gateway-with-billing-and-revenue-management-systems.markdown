---

title: Systems and methods for integrating a service access gateway with billing and revenue management systems
abstract: Systems and methods are described for integrating a gateway in a telecom network environment with charging and payment functionality. The gateway is provided with three points of integration with charging and billing servers. These three points include a payment service, a charging data record listener and a credit control interceptor. The payment service provides an interface for client applications that reside outside of the telecom network to invoke a charging request, to translate the charging request and to relay it to the billing server. The charging data record listener listens for charging data records generated within the gateway and issues offline charging requests to the billing server upon detecting that a particular charging data record has been generated. The credit control interceptor intercepts requests in the communication traffic flowing through the gateway and initiates online charging requests to the billing server upon intercepting said requests.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09432825&OS=09432825&RS=09432825
owner: ORACLE INTERNATIONAL CORPORATION
number: 09432825
owner_city: Redwood Shores
owner_country: US
publication_date: 20110113
---
The present application claims the benefit of U.S. Provisional Patent Application No. 61 294 766 entitled GATEKEEPER SERVICE EXPOSURE PLATFORM FOR MOBILE COMMUNICATIONS by Sharath Rajasekar et al. filed on Jan. 13 2010 which is incorporated by reference herein in its entirety including all Appendices filed therewith.

A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

The current invention relates to mobile communications and gateways for managing access to a wireless network and in particular to integrating service access gateways with charging payment and credit control systems.

With the advent of mobile communications more and more devices are becoming integrated with the world wide web. Everything from a simple cellular phone to more complex mobile devices such as laptops electronic books tablets personal digital assistants PDAs and even automobiles are striving to maintain a constant connection to the internet. As a result of all this interconnectivity websites and other online application providers have been showing an ever increasing interest in providing services to these mobile clients.

For mobile network operators MNOs that own the network and access to the mobile subscriber onboarding all of these third party service providers and applications has not proved to be easy. A multitude of issues and problems may arise when managing large numbers of applications attempting to access the telecom network. One such issue involves payment charging credit debit actions as well as other billing and revenue management functions.

In many cases providing centralized management and integration of all these charging and billing functions can be a quite complex and tedious task for a network operator especially when it involves large numbers of applications. By way of example some applications may wish to integrate their charging into the monthly bill of a subscriber while others may be based on prepaid services requiring credit control actions on the fly. Moreover in some cases the charging and payment functions can be invoked for actions initiated by a mobile subscriber while in other cases the charging action may originate with the application providing the service to the subscriber. What is needed is a way to integrate all of these potential use cases and to provide centralized management and control over the payment charging and other revenue management in a telecom network environment.

Systems and methods are described for integrating a gateway in a telecom network environment with charging and payment functionality. The gateway is provided with three points of integration with charging and billing servers. These three points include a payment service a charging data record listener and a credit control interceptor. The payment service provides an interface for client applications that reside outside of the telecom network to invoke a charging request to translate the charging request and to relay it to the billing server. The charging data record listener listens for charging data records generated within the gateway and issues offline charging requests to the billing server upon detecting that a particular charging data record has been generated. The credit control interceptor intercepts requests in the communication traffic flowing through the gateway and initiates online charging requests to the billing server upon intercepting said requests.

The invention is illustrated by way of example and not by way of limitation in the figures of the accompanying drawings in which like references indicate similar elements. References to embodiments in this disclosure are not necessarily to the same embodiment and such references mean at least one. While specific implementations are discussed it is understood that this is done for illustrative purposes only. A person skilled in the relevant art will recognize that other components and configurations may be used without departing from the scope and spirit of the invention.

In the following description numerous specific details are set forth to provide a thorough description of the invention. However it will be apparent to those skilled in the art that the invention may be practiced without these specific details. In other instances well known features have not been described in detail so as not to obscure the invention.

In accordance with various embodiments of the invention a service exposure gatekeeper platform is integrated with charging payment billing and revenue management systems. In accordance with an embodiment the gatekeeper platform is a service access gateway that is positioned to manage access to a wireless telecommunications telecom network e.g. cellular telephone network such as GSM or CDMA network . The gatekeeper can intercept and manage communications between the mobile devices in the wireless network and the various third party service providers such as client web applications residing on the Internet. For example the gatekeeper can intercept both network initiated communications and application initiated communications and apply service level agreements SLAs security traffic throttling protocol translation and other functionality to those communications. In accordance with one embodiment the gatekeeper is implemented as a web application that is deployed by a network operator.

In accordance with an embodiment the gatekeeper allows the gathering of billing information to charge the various clients accessing the network and the integration with various billing and revenue management BRM systems. In accordance with an embodiment there are three points of integration of the gatekeeper with the BRM systems 1 a payment communications service 2 a Diameter protocol charging data record CDR listener and 3 a Diameter protocol credit control interceptor. As described in further detail below all of these points of integration allow the gatekeeper to activate charging and payment services in response a request received from a client application or in response to traffic flowing through the telecom network.

As illustrated the gatekeeper can take the role of a gateway positioned between the telecom network and a multitude of different service provider applications residing externally with respect to the telecom network. The gateway can play an intermediary role between the request traffic sent from the applications to the resource in the telecom network and requests sent from the network to the applications. In accordance with various embodiments the gateway can be used to apply a number functions to this request traffic including but not limited to service orchestration service exposure policy enforcement and network integration . By way of example the service orchestration functionality of the gateway can be used to orchestrate multiple services provided by the various applications in a single call that is established for a mobile subscriber in the telecom network. The service exposure functionality can expose a number of low level native protocols of the telecom network as a simple web services accessible by the applications over hypertext transfer protocol HTTP simple object access protocol SOAP . The policy enforcement engine can enforce a set of rules and policies according to service level agreements SLAs established between the network operator and its clients. In addition the gateway can include a number of other features such as client management and an application container for hosting applications.

In accordance with an embodiment the gateway can be integrated with billing and revenue management BRM systems and remote charging servers . The BRM system is a set of software tools deployed in an enterprise to manage the billing rating and settlement of various monetary policies of the enterprise. It can interact with any number of back end account balance systems that maintain financial information. In accordance with various embodiments the gateway is integrated with such BRM and other account management systems by employing a payment service a charging data record CDR listener and a credit control interceptor.

In accordance with an embodiment the first point of integration is the payment communication service. The payment service can provide an interface for client applications to invoke charge or refund requests on a remote billing or charging server. In accordance with an embodiment the payment service supports the ParlayX protocol Amount Charging functions e.g. Charge Amount Refund Amount Charge Split Amount and also supports the ParlayX Reserve Amount Charging functions Reserve Amount Reserve Additional Amount Charge Reservation Release Reservation . Parlay X is a set of Web Services application programming interfaces APIs defined jointly by the European Communications Standards Institute ETSI the Parlay Group and the Third Generation Partnership Program 3GPP . For reference purposes the Parlay X version 3.0 Specification is incorporated by reference herein. However it is noted that many embodiments contained in this disclosure are not limited to the Parlay X specification s and that other protocols or APIs can be easily utilized within the scope of the various embodiments.

The payment interfaces can be provided in the north application facing interface i.e. the interface between the gateway and the client applications residing outside of the telecom network that wish to provide services to subscribers within the telecom network. In the south facing i.e. telecom network facing interface this payment communication service can support the Diameter online charging Ro protocol. The Diameter protocol is an authentication authorization and accounting protocol for computer networks. More specifically Diameter protocol is specified by the Request for Comments Memorandum RFC 3588 and 4006 published by the Internet Engineering Task Force IETF which are hereby incorporated by reference herein in their entireties. It is noted however that the Diameter protocol is also not limiting to all of the embodiments contained in this disclosure.

As illustrated the application can invoke charge amount request to the payment communication service residing on the gateway . In accordance with an embodiment the gateway then issues a credit control request CCR to the BRM via the Diameter Ro protocol on the network. Once a credit control answer CCA is received back from the network the payment communication service can issue a charge amount response back to the application. As illustrated the communication between the application and the gatekeeper can be performed via the Parlay X APIs while the communication between the gatekeeper and the network can be done over the Diameter protocol.

In accordance with various embodiments there can be many use cases for the payment service. By way of example one possible use case occurs during service delivery. A subscriber in the telecom network may order a service from a service provider. For example a user can order a picture pack from Disney by sending a short messaging service SMS message. The client application can then reserve funds for service by using the payment communication service residing on the gateway. For example the Disney application can reserve a particular dollar amount using the payment interface which is the price for the picture pack. BRM can in turn approve the reservation. The application can then deliver the service to the end user Disney uses the MMS service to deliver the one time picture pack . The application then commits the reservation. In addition the Disney application can commit the reserved amount after a delivery notification has been received indicating that the picture pack has been delivered.

It should be noted that the above example as well as all example use cases described herein is only provided for purposes of illustration and is not intended to limit the payment communication service functionality nor other embodiments described herein. Various other use cases exist for this service in addition to the one described above.

Continuing with the illustration once the gateway receives the request from the application it can issue a credit control request CCR direct debit function to the server over the Diameter Ro protocol. When it receives a credit control answer CCA the gateway can issue one or more additional direct debit requests to the server to split the charge amount. After all of these functions have been performed the gateway returns a chargeSplitAmountResponse to the client application indicating whether the charges were successfully performed.

In accordance with various embodiments the gateway can continuously generate charging data records CDRs as it continues to process incoming requests from the applications and resources in the telecom network. A CDR can contain a variety of information for each processed request such as which method was invoked what response was received and so on. In accordance with an embodiment a listener can be registered to listen to the various CDRs as they are being generated and to perform a particular function once a specified CDR or a set of CDRs are issued by the gateway.

In accordance with an embodiment the CDR listener is used to convert the CDRs that the gateway generates into Diameter offline charging Rf charging requests allowing the gateway to be integrated with charging systems that support the Diameter Rf offline charging. This can be useful for any billing charging and reporting functionality related to traffic passing through the gateway.

In accordance with an embodiment when traffic is sent through the gateway CDRs are created. A CDR to Diameter module can be deployed and act as a singleton service Java Messaging Service JMS Listener. This listener can be managed by an MBean in the gateway. When a CDR is created that contains a particular value pair and start stop value the listener can create a Diameter START or STOP Account request ACR . In accordance with an embodiment the Diameter attribute value pairs AVPs that exist in this ACR depend on the values contained in the CDR that the gateway generated.

As illustrated the CDR listener is deployed on the gateway and communicates with BRM systems by way of the Diameter Rf protocol. When the gateway intercepts various requests from the application or responses from the telecom network directed back to the application the gatekeeper can generate charging data records. This can be generated by the network plugin or some other component of the gateway. The CDR listener can subscribe to listen for particular records and when the network plug in issues a record having been subscribed by the listener it can invoke the Diameter Rf function to contact the BRM system .

There are many use cases for the CDR listener but one illustration of a potential use case can be as follows end users subscribe to Disney s new multimedia messaging service MMS service. End users subscribe to Disney s service on the Hannah Montana web page and by sending a register via SMS. Disney can then send out a particular number of messages e.g. 4000 MMS messages per day. By doing this 4000 CDRs can be generated per day. These CDR s are then translated to Diameter calls as illustrated in the figure. The batch sizes etc. allows for more control on how to handle collecting of CDRs and Diameter traffic. In this example the bill may be sent out at the end of the month where BRM sends a bill to Disney for all the thousands of MMS messages being sent out to subscriber end users.

In accordance with various embodiments the gateway can include a sequence of interceptors that can be applied to the communication traffic being sent through the gateway. In accordance with an embodiment an interceptor is an object that can be registered to filter the requests coming from the network or from the application and perform a particular functionality in response to receiving a specified request. For example one interceptor may change the parameters in certain types of requests in order to translate between different protocols while another interceptor may invoke perform some other service. In accordance with an embodiment multiple interceptors can be applied to each request in a sequence where if the filter of the interceptor matches the parameters of the request the interceptor can be invoked otherwise if the filter does not match the request the interceptor can be skipped. In this manner the gateway can apply specific custom functionality to the communication traffic flowing to and from the telecom network.

In accordance with an embodiment a third point of integration between the gateway and various billing charging payment systems can be a credit control interceptor CCI . The CCI can give a network operator of the telecom network a possibility to perform pre paid credit control and charging operations on arbitrary traffic sent through the gateway. In accordance with an embodiment the parameters used to execute the credit control and charging operations can either be taken from the traffic being sent by the application or by a set of statistics provided by the operator. These parameters can be defined based on a service type or method executed by the client application and the service provider running the application. In accordance with an embodiment the operator can also define when a reservation of funds is to be made and at what point this reservation should be committed if successfully reserved. This means that the operator can choose to reserve the amount when a north facing operation is executed and commit the reservation asynchronously at a later point based on traffic coming from the network such as a message delivery report. In accordance with an embodiment the credit control is performed by an external billing system using the Diameter protocol.

One potential use case of the credit control interceptor can be as follows End user can register for a service subscription. For example a user may subscribe to the Hannah Montana picture of the week by sending an SMS message to Disney s short code. At this point a pre paid check is made. Disney can then send an MMS message to the user which is intercepted by the CC interceptor. A credit control check is made using the recipient address as payee and a reservation is made for the amount specified in the custom SLA. MMS is then delivered to subscriber by sending the weekly picture MMS the user. At this point funds are withdrawn and upon receiving the delivery notification the interceptor commits the reservation towards BRM and funds are withdrawn from the user s account.

Further details and information on the payment service charging data records listener and credit control interceptor as well as other functionality described throughout this disclosure can be found in the U.S. Provisional Patent Application No. 61 294 766 which is incorporated herein by reference in its entirety including all of the Appendices filed therewith.

Throughout the various contexts described in this disclosure the embodiments of the invention further encompass computer apparatus computing systems and machine readable media configured to carry out the foregoing systems and methods. In addition to an embodiment consisting of specifically designed integrated circuits or other electronics the present invention may be conveniently implemented using a conventional general purpose or a specialized digital computer or microprocessor programmed according to the teachings of the present disclosure as will be apparent to those skilled in the computer art.

Appropriate software coding can readily be prepared by skilled programmers based on the teachings of the present disclosure as will be apparent to those skilled in the software art. The invention may also be implemented by the preparation of application specific integrated circuits or by interconnecting an appropriate network of conventional component circuits as will be readily apparent to those skilled in the art.

The various embodiments include a computer program product which is a storage medium media having instructions stored thereon in which can be used to program a general purpose or specialized computing processor s device s to perform any of the features presented herein. The storage medium can include but is not limited to one or more of the following any type of physical media including floppy disks optical discs DVDs CD ROMs microdrives magneto optical disks holographic storage ROMs RAMs PRAMS EPROMs EEPROMs DRAMs VRAMs flash memory devices magnetic or optical cards nanosystems including molecular memory ICs paper or paper based media and any type of media or device suitable for storing instructions and or information. The computer program product can be transmitted in whole or in parts and over one or more public and or private networks wherein the transmission includes instructions which can be used by one or more processors to perform any of the features presented herein. The transmission may include a plurality of separate transmissions. In accordance with certain embodiments however the computer storage medium containing the instructions is non transitory i.e. not in the process of being transmitted but rather is persisted on a physical device.

The foregoing description of the preferred embodiments of the present invention has been provided for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Many modifications and variations can be apparent to the practitioner skilled in the art. Embodiments were chosen and described in order to best explain the principles of the invention and its practical application thereby enabling others skilled in the relevant art to understand the invention. It is intended that the scope of the invention be defined by the following claims and their equivalents.

