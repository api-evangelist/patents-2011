---

title: Method and apparatus for routing messages of a positioning protocol in a wireless network
abstract: Methods and apparatuses are provided that facilitate routing of messages of a positioning protocol, such as long term evolution (LTE) positioning protocol annex (LPPa). A positioning server can determine a network area identifier of one or more messages based at least in part on an identifier of a base station associated with the one or more messages. Based at least in part on the network area identifier, the positioning server can provide the one or more messages to an intermediate network node corresponding to the one or more base stations, such as a mobility management entity (MME). MME can similarly provide the one or more messages to an optional gateway between it and the one or more base stations based at least in part on receiving the network area identifier in the one or more messages. In addition, a base station can update positioning information with the positioning server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09270587&OS=09270587&RS=09270587
owner: QUALCOMM Incorporated
number: 09270587
owner_city: San Diego
owner_country: US
publication_date: 20110106
---
The present Application for Patent claims priority to Provisional Application No. 61 293 534 entitled TRACKING AREA BASED ROUTING OF POSITIONING MESSAGES filed Jan. 8 2010 and assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The following description relates generally to wireless network communications and more particularly to routing messages of a positioning protocol across network nodes.

Wireless communication systems are widely deployed to provide various types of communication content such as for example voice data and so on. Typical wireless communication systems may be multiple access systems capable of supporting communication with multiple users by sharing available system resources e.g. bandwidth transmit power . . . . Examples of such multiple access systems may include code division multiple access CDMA systems time division multiple access TDMA systems frequency division multiple access FDMA systems orthogonal frequency division multiple access OFDMA systems and the like. Additionally the systems can conform to specifications such as third generation partnership project 3GPP 3GPP long term evolution LTE ultra mobile broadband UMB evolution data optimized EV DO etc.

Generally wireless multiple access communication systems may simultaneously support communication for multiple mobile devices. Each mobile device may communicate with one or more base stations via transmissions on forward and reverse links. The forward link or downlink refers to the communication link from base stations to mobile devices and the reverse link or uplink refers to the communication link from mobile devices to base stations. Further communications between mobile devices and base stations may be established via single input single output SISO systems multiple input single output MISO systems multiple input multiple output MIMO systems and so forth. In addition mobile devices can communicate with other mobile devices and or base stations with other base stations in peer to peer wireless network configurations.

In addition devices can determine positioning at least in part by utilizing assisted global positioning system GPS observed time difference of arrival OTDOA or other triangulation techniques involving one or more base stations enhanced cell identifier E CID and or the like. For example a positioning server such as a serving mobile location center SMLC evolved SMLC eSMLC etc. can provide positioning messages over an LTE positioning protocol LPP LPP annex LPPa etc. to the device and or to other nodes in the network to facilitate performing such measurements for computing a position of the device. In one example the positioning messages can include assistance information such as a location of one or more base stations. In this regard positioning messages can be requested by a device and the request routed through at least a base station and a mobility management entity MME to the positioning server. Thus the positioning server can route corresponding positioning messages to the device through the mobility management entity MME and related base station based at least in part on the request.

The following presents a simplified summary of one or more aspects in order to provide a basic understanding of such aspects. This summary is not an extensive overview of all contemplated aspects and is intended to neither identify key or critical elements of all aspects nor delineate the scope of any or all aspects. Its sole purpose is to present some concepts of one or more aspects in a simplified form as a prelude to the more detailed description that is presented later.

In accordance with one or more embodiments and corresponding disclosure thereof various aspects are described in connection with facilitating utilizing a mapping of a network area identifier to a base station identifier at a positioning server for routing messages of a positioning protocol. In this regard the positioning server can appropriately route messages to a base station that are not associated with a particular device through an intermediate network node such as a mobility management entity MME . In another example the positioning server can include the network area identifier in a message to allow the intermediate network node to identify a possible gateway node between the intermediate network node and the base station and accordingly route the messages to the gateway node for providing to the base station. It is to be appreciated that the positioning server can include the network area identifier in the message regardless of whether the message is associated with a particular device or not. In addition in this example the intermediate network node can include an identifier of the base station in the messages to the gateway node.

According to an example a method of communicating a message of a positioning protocol in a wireless network is provided that includes generating a message of a positioning protocol associated with a base station and determining a network area identifier associated with the base station. The method further includes delivering the message to an intermediate network node based at least in part on the network area identifier.

In another aspect an apparatus for routing messages of a positioning protocol in a wireless network is provided that includes at least one processor configured to generate a message of a positioning protocol associated with a base station and determine a network area identifier associated with the base station. The at least one processor is further configured to provide the message to an intermediate network node based at least in part on the network area identifier. In addition the apparatus includes a memory coupled to the at least one processor.

In yet another aspect an apparatus for routing messages of a positioning protocol in a wireless network is provided that includes means for generating a message of a positioning protocol associated with a base station and means for determining a network area identifier associated with the base station. The apparatus further includes means for delivering the message to an intermediate network node based at least in part on the network area identifier.

Still in another aspect a computer program product is provided routing messages of a positioning protocol in a wireless network including a computer readable medium having code for causing at least one computer to generate a message of a positioning protocol associated with a base station and code for causing the at least one computer to determine a network area identifier associated with the base station. The computer readable medium further includes code for causing the at least one computer to provide the message to an intermediate network node based at least in part on the network area identifier.

Moreover in an aspect an apparatus for routing messages of a positioning protocol in a wireless network is provided that includes a message component for generating a message of a positioning protocol associated with a base station and a network area identifier determining component for discerning a network area identifier associated with the base station. The apparatus further includes a message routing component for delivering the message to an intermediate network node based at least in part on the network area identifier.

According to another example a method for routing messages of a positioning protocol in a wireless network is provided that includes receiving a network area identifier related to a base station in a message of a positioning protocol and determining whether a gateway is present based at least in part on the network area identifier. The method further includes delivering the message to a network node based at least in part on whether the gateway is present.

In another aspect an apparatus for routing messages of a positioning protocol in a wireless network is provided that includes at least one processor configured to receive a network area identifier related to a base station in a message of a positioning protocol and determine whether a gateway is present based at least in part on the network area identifier. The at least one processor is further configured to provide the message to a network node based at least in part on whether the gateway is present. In addition the apparatus includes a memory coupled to the at least one processor.

In yet another aspect an apparatus for routing messages of a positioning protocol in a wireless network is provided that includes means for receiving a network area identifier related to a base station in a message of a positioning protocol and means for determining whether a gateway is present based at least in part on the network area identifier. The apparatus further includes means for delivering the message to a network node based at least in part on whether the gateway is present.

Still in another aspect a computer program product is provided for routing messages of a positioning protocol in a wireless network including a computer readable medium having code for causing at least one computer to receive a network area identifier related to a base station in a message of a positioning protocol and code for causing the at least one computer to determine whether a gateway is present based at least in part on the network area identifier. The computer readable medium further includes code for causing the at least one computer to provide the message to a network node based at least in part on whether the gateway is present.

Moreover in an aspect an apparatus for routing messages of a positioning protocol in a wireless network is provided that includes a message receiving component for obtaining a network area identifier related to a base station in a message of a positioning protocol and a gateway presence determining component for discerning whether a gateway is present based at least in part on the network area identifier. The apparatus further includes a message routing component for delivering the message to a network node based at least in part on whether the gateway is present.

In another example a method for updating positioning information in a wireless network is provided that includes receiving one or more messages from a positioning server and detecting modification of one or more parameters related to a position. The method further includes communicating a message to the positioning server including the one or more parameters as modified.

In another aspect an apparatus for updating positioning information in a wireless network is provided that includes at least one processor configured to receive one or more messages from a positioning server and detect modification of one or more parameters related to a position. The at least one processor is further configured to communicate a message to the positioning server including the one or more parameters as modified. In addition the apparatus includes a memory coupled to the at least one processor.

In yet another aspect an apparatus for updating positioning information in a wireless network is provided that includes means for detecting modification of one or more parameters related to a position. The apparatus further includes means for communicating a message to a positioning server including the one or more parameters as modified.

Still in another aspect a computer program product is provided for updating positioning information in a wireless network including a computer readable medium having code for causing at least one computer to receive one or more messages from a positioning server and code for causing the at least one computer to detect modification of one or more parameters related to a position. The computer readable medium further includes code for causing the at least one computer to communicate a message to the positioning server including the one or more parameters as modified.

Moreover in an aspect an apparatus for updating positioning information in a wireless network is provided that includes a configuration modification detecting component for determining modification of one or more parameters related to a position. The apparatus further includes a positioning server communicating component for transmitting a message to a positioning server including the one or more parameters as modified.

To the accomplishment of the foregoing and related ends the one or more aspects comprise the features hereinafter fully described and particularly pointed out in the claims. The following description and the annexed drawings set forth in detail certain illustrative features of the one or more aspects. These features are indicative however of but a few of the various ways in which the principles of various aspects may be employed and this description is intended to include all such aspects and their equivalents.

Various aspects are now described with reference to the drawings. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of one or more aspects. It may be evident however that such aspect s may be practiced without these specific details.

As described further herein a mapping of network area identifiers to base station identifiers can be utilized by a positioning server to determine an intermediate network node related to a base station for routing one or more messages of a positioning protocol. In addition for example the network area identifier can be indicated in the messages where one or more gateway nodes exist between the intermediate network node and the base station. Thus the intermediate network node can determine an appropriate gateway node to which to forward the message based at least in part on the network area identifier. Moreover in this example the intermediate network node can include an identifier of the base station in the message to allow the gateway node to determine the base station to which to forward the message. Furthermore for example a base station can be a home evolved Node B HeNB which can update its configuration to the positioning server upon detecting a modification to it position or other configuration parameters.

As used in this application the terms component module system and the like are intended to include a computer related entity such as but not limited to hardware firmware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. In addition these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and or remote processes such as in accordance with a signal having one or more data packets such as data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems by way of the signal.

Furthermore various aspects are described herein in connection with a terminal which can be a wired terminal or a wireless terminal. A terminal can also be called a system device subscriber unit subscriber station mobile station mobile mobile device remote station remote terminal access terminal user terminal terminal communication device user agent user device or user equipment UE . A wireless terminal may be a cellular telephone a satellite phone a cordless telephone a Session Initiation Protocol SIP phone a wireless local loop WLL station a personal digital assistant PDA a handheld device having wireless connection capability a computing device or other processing devices connected to a wireless modem. Moreover various aspects are described herein in connection with a base station. A base station may be utilized for communicating with wireless terminal s and may also be referred to as an access point a Node B evolved Node B eNB or some other terminology.

Moreover the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

The techniques described herein may be used for various wireless communication systems such as CDMA TDMA FDMA OFDMA SC FDMA and other systems. The terms system and network are often used interchangeably. A CDMA system may implement a radio technology such as Universal Terrestrial Radio Access UTRA cdma2000 etc. UTRA includes Wideband CDMA W CDMA and other variants of CDMA. Further cdma2000 covers IS 2000 IS 95 and IS 856 standards. A TDMA system may implement a radio technology such as Global System for Mobile Communications GSM . An OFDMA system may implement a radio technology such as Evolved UTRA E UTRA Ultra Mobile Broadband UMB IEEE 802.11 Wi Fi IEEE 802.16 WiMAX IEEE 802.20 Flash OFDM etc. UTRA and E UTRA are part of Universal Mobile Telecommunication System UMTS . 3GPP Long Term Evolution LTE is a release of UMTS that uses E UTRA which employs OFDMA on the downlink and SC FDMA on the uplink. UTRA E UTRA UMTS LTE and GSM are described in documents from an organization named 3rd Generation Partnership Project 3GPP . Additionally cdma2000 and UMB are described in documents from an organization named 3rd Generation Partnership Project 2 3GPP2 . Further such wireless communication systems may additionally include peer to peer e.g. mobile to mobile ad hoc network systems often using unpaired unlicensed spectrums 802.xx wireless LAN BLUETOOTH and any other short or long range wireless communication techniques.

Various aspects or features will be presented in terms of systems that may include a number of devices components modules and the like. It is to be understood and appreciated that the various systems may include additional devices components modules etc. and or may not include all of the devices components modules etc. discussed in connection with the figures. A combination of these approaches may also be used.

Referring to illustrated is a wireless communication system that facilitates routing messages of a positioning protocol among one or more network nodes. System includes a positioning server that provides messages of a positioning protocol to one or more base stations and or which can relate to devices served by base stations and or otherwise . In addition system includes an intermediate network node that can in one example route the messages to base stations and or . System can also optionally include a gateway that further routes messages from intermediate network node to the base stations and or in another example. Positioning server can be a serving mobile location center SMLC evolved SMLC eSMLC in LTE and or the like. Base stations and can be a macrocell base station femtocell or picocell base station e.g. home evolved Node B HeNB a mobile base station relay node a portion thereof and or the like. Intermediate network node can be a mobility management entity MME that provides authorization and or authentication for one or more devices communicating with base stations and or and or a similar network node. Where base stations and are HeNBs optional gateway can be a HeNB gateway for example.

According to an example positioning server can communicate messages of the positioning protocol to base stations and or at least through intermediate network node . In one example the positioning protocol can be an LTE positioning protocol LPP LPP annex LPPa and or similar positioning protocol. In addition for example the messages can relate to specific requests from devices communicating with base stations and or and can be received through intermediate network node . Thus the messages can include a related network area identifier such as a tracking area identifier TAI in LTE as specified by the intermediate network node . Thus for a given response message positioning server can identify an intermediate network node based at least in part on a network area identifier that positioning server can associate with the response message.

In addition in an example positioning server stores a mapping of network area identifiers NAI to base station identifiers BS ID such as mapping . For example the mapping can be of a format similar to the following 

Moreover where gateway is present positioning server can optionally include the network area identifier in the messages to the intermediate network node even for messages associated with a particular device as shown for message . In this example the intermediate network node can similarly store a mapping of network area identifiers to gateway identifiers GW ID such as mapping . Similarly this mapping can have a format similar to the following in one example 

In this regard for positioning messages that are not related to specific devices but are intended for a particular base station and or such as messages related to a position of a base station base station timing acknowledging a position update from the base station and or the like as described herein the positioning server can identify the intermediate network node to which base station and or communicates based on the mapping and the base station identifier in the message since it does not have a specific device identifier the corresponds to the intermediate network node . In addition where gateway is present positioning server can include the network area identifier in the message and the intermediate network node can determine the gateway associated therewith to determine the gateway corresponding to base station and or . This can be performed regardless of whether the positioning message relates to a particular device in this example since the intermediate network node may not otherwise know to which gateway the base station and or communicates.

Turning to an example wireless communication system is illustrated that facilitates routing messages of a positioning protocol based at least in part on a network area identifier. System can include a positioning server which can be similar to substantially any positioning server described herein and can thus be an eSMLC etc. System can also include an intermediate network node that can be similar to substantially any intermediate network node described herein and can thus be an MME or similar component that facilitates communicating with one or more devices or related base stations. Moreover for example system can optionally comprise a gateway that facilitates accessing one or more base stations such as base station . Where gateway is not present for example intermediate network node can communicate directly with base station . As described base station can be an HeNB macrocell base station mobile base station relay node etc. as described. Thus for example where base station is an HeNB gateway can be an HeNB gateway.

Positioning server can comprise a message component that obtains or generates one or more messages of a positioning protocol e.g. LPPa etc. intended for one or more base stations or related device communication with the one or more base stations and a network area identifier determining component for discerning a network area identifier associated with an identifier of the one or more base stations. Positioning server can also include a message routing component for delivering the one or more messages to an intermediate network node for providing to the one or more base stations based at least in part on the network area identifier and an optional network area identifier receiving component for obtaining one or more network area identifiers e.g. and or associations to one or more base station identifiers .

According to an example message component can receive or otherwise generate a message of a positioning protocol for transmitting to a base station such as base station . In one example the message can be directed to a device based at least in part on a request from the device. In another example the message can be directed to the base station and can be a message related to positioning of the base station timing an acknowledgement of a positioning update as described further herein etc. for example. In either case the message can include an identifier of the base station and network area identifier determining component can determine the identifier of the base station along with a network area identifier associated with the identifier of the base station. In one example network area identifier determining component determines such based at least in part on a mapping of network area identifiers to base station identifiers stored by network area identifier determining component e.g. in a memory or other data store etc. . In one example the network area identifier can be a tracking area identifier TAI or similar identifier. In addition intermediate network node can be an MME associated with the TAI in a core network that includes the positioning server intermediate network node etc. In this regard message routing component can determine intermediate network node as associated with the determined network area identifier and can forward the message to intermediate network node for providing to base station .

Moreover for example network area identifier receiving component can obtain the mapping of network area identifier to base station identifiers from one or more components of the core network not shown such as an operations and management OAM or similar component. For example the mapping provided can be a static or semistatic database such that one or more components can update the mappings. In one example base station can provision updates to the mapping related to base station based at least in part on detecting a configuration change as described further herein according to a timer and or the like. In another example intermediate network node can provide mappings to positioning server based at least in part on the network area identifier associated with intermediate network node and an identifier of one or more base stations communicating with intermediate network node e.g. this can occur periodically for a given base station during initialization based on another event and or the like . In addition in one example base station can provide its identifier to the positioning server to propagate updates at base station as described above as part of intermediate network node provisioning network area identifier mappings and or the like.

In another example where gateway is present message routing component can include the determined network area identifier within the message. In this regard as described further herein intermediate network node can determine to route the message to a gateway related to the network area identifier for communicating to the base station . In addition as described further herein intermediate network node can specify to positioning server whether or not to include the network area identifier in the message. In one example intermediate network node can communicate a parameter to positioning server to request a network area identifier in all messages to the intermediate network node only for a specified set of base station identifiers e.g. only HeNBs and or the like. In either case network area identifier receiving component can obtain the indication and or set of base station identifiers and message routing component can accordingly indicate the network area identifier as desired in corresponding messages. In another example positioning server can include the network area identifier in messages by default unless otherwise instructed by the intermediate network node .

Referring to illustrated is an example wireless communication system that facilitates routing messages of a positioning protocol based at least in part on a network area identifier. System can include a positioning server which can be similar to substantially any positioning server described herein and can thus be an eSMLC etc. as described. System can also include an intermediate network node that can be similar to substantially any intermediate network node described herein and can thus be an MME or similar component that facilitates communicating with one or more devices or related base stations. Moreover for example system can optionally comprise a gateway that facilitates accessing one or more base stations such as base station as described. Where gateway is not present for example intermediate network node can communicate directly with base station . As described base station can be an HeNB macrocell base station mobile base station relay node etc. as described. Thus for example where base station is an HeNB gateway can be an HeNB gateway.

Intermediate network node can comprise a message receiving component that obtains a message of a positioning protocol e.g. LPPa etc. related to one or more base stations from a positioning server and a gateway presence determining component that can detect whether a gateway exists between intermediate network node and the one or more base stations e.g. and or one or more devices communicating therewith . Intermediate network node can additionally comprise a message routing component that forwards the message to a gateway where present or the one or more base stations and an optional network area identifier receiving component that obtains network area identifiers and associated gateway identifiers.

According to an example message receiving component can obtain a message of the positioning protocol from positioning server related to one or more base stations such as base station or a device communicating therewith. Gateway presence determining component in one example discerns whether a gateway exists between intermediate network node and base station . In one example this can include determining whether base station is a HeNB detecting the gateway upon initialization of base station with a core network receiving an indication of gateway from base station or one or more other network components or devices and or the like. In one example gateway presence determining component can store a list of base station identifiers that correspond to base stations that communicate through a gateway. Moreover for example gateway presence determining component can forward such identifiers to positioning server so positioning server can determine whether to provide a network area identifier in communications for the base stations as described previously.

Additionally in this regard where a network area identifier is received in the message from positioning server gateway presence determining component specifies that a gateway exists between intermediate network node and base station . In this example message routing component can determine the gateway which is gateway based at least in part on a stored mapping between the network area identifier and an identifier of gateway . As described for example network area identifier receiving component can obtain this mapping e.g. from an OAM generate the mapping based at least in part on associating gateway identifiers with network area identifiers upon initialization of the gateway or base station with the core network and or the like.

Moreover for example message routing component can include the identifier of the base station in the message or a header thereof to facilitate routing at the gateway . In another example where the message received from the positioning server does not include a network area identifier gateway presence determining component can determine that there is no gateway between intermediate network node and base station and message routing component can forward the message directly to base station .

Turning to an example wireless communication system that facilitates routing messages of a positioning protocol based at least in part on a network area identifier is illustrated. System can include a positioning server which can be similar to substantially any positioning server described herein and can thus be an eSMLC etc. as described. System can also include an intermediate network node that can be similar to substantially any intermediate network node described herein and can thus be an MME or similar component that facilitates communicating with one or more devices or related base stations as described. Moreover as described for example system can optionally comprise a gateway that facilitates accessing one or more base stations such as base station as described. Where gateway is not present for example intermediate network node can communicate directly with base station . As described base station can be an HeNB macrocell base station mobile base station relay node etc. as described. Thus for example where base station is an HeNB gateway can be an HeNB gateway.

Base station can comprise a configuration modification detecting component that can determine modification of one or more configuration parameters for a base station and a positioning server communicating component that can communicate the one or more configuration parameters as modified to one or more network components. According to an example as described positioning server can communicate messages of a positioning protocol e.g. LPPa etc. to base station through intermediate network node and or gateway if present which can be received at positioning server communicating component . As described base station can be an HeNB which can be configured by a user. Similarly for example the base station can be moved from one location to another. In either case this can result in a configuration update. In an example configuration modification detecting component can determine the modification of at least one or more positioning parameters such as location at least in part by monitoring the parameters or otherwise being notified of modification.

In this example positioning server communicating component can transmit a message to positioning server to update the parameters for base station . For example the message can be of the positioning protocol utilized by positioning server to communicate with base station . In one example the parameters can relate to assistance data subsequently provided to one or more devices for determining positioning. In another example the updated position or other parameters may change the network area identifier and or gateway in one example associated with base station . Thus the positioning server in this example can associate the identifier of base station with the new network area identifier and or intermediate network node can associate the network area identifier with the new gateway if not already associated for example.

Referring to an example wireless communication system is illustrated that facilitates routing messages of a positioning protocol. System comprises an eSMLC that communicates positioning protocol message through an MME to an eNB . In this example MME can be associated with TAI Y and eNB can have identifier X. As depicted at eSMLC generation of a non UE associated LPPa message for eNB X can be triggered . This can include for example messages for requesting a position updating timing acknowledging positioning updates and or the like. eSMLC can lookup a TAI for eNB X . As described this can include analyzing a mapping of TAIs to eNB identifiers which can be received or otherwise generated updated by eSMLC . eSMLC can determine that TAI Y is associated with eNB X . Thus eSMLC can transmit a container message that specifies eNB ID X to MME based at least in part on MME being associated with TAI Y. For example the container message can be a location service LCS message in LTE. MME can subsequently forward container message which can have different headers than container message to eNB based at least in part on the eNB ID received in container message .

Referring to an example wireless communication system is illustrated that facilitates routing messages of a positioning protocol. System comprises an eSMLC that communicates positioning protocol message through an MME and a HeNB gateway to an HeNB . In this example MME can be associated with TAI Y and HeNB can have identifier X. As depicted at eSMLC generation of a non UE associated LPPa message for eNB X can be triggered . This can include for example messages for requesting a position updating timing and or the like. eSMLC can lookup a TAI for eNB X . As described this can include analyzing a mapping of TAIs to eNB identifiers which can be received or otherwise generated updated by eSMLC . eSMLC can determine that TAI Y is associated with eNB X . Thus eSMLC can transmit a container message that specifies eNB ID X and TAI Y to MME based at least in part on MME being associated with TAI Y.

As described for example eSMLC can include TAI Y in container message based at least in part on a request from MME to include TAI in all container messages container messages for eNB X and or the like a determination to include TAI in container messages eSMLC or MME detecting presence of HeNB gateway and or the like. MME can receive the container message and can lookup a HeNB gateway for TAI Y . MME can identify the HeNB gateway related to TAI Y and can transmit container message to HeNB gateway for forwarding to HeNB . For example MME can include eNB ID X in the container message e.g. or a header thereof to allow HeNB gateway to determine the container message is for HeNB .

Referring to example methodologies relating to routing messages of a positioning protocol are illustrated. While for purposes of simplicity of explanation the methodologies are shown and described as a series of acts it is to be understood and appreciated that the methodologies are not limited by the order of acts as some acts may in accordance with one or more embodiments occur in different orders and or concurrently with other acts from that shown and described herein. For example it is to be appreciated that a methodology could alternatively be represented as a series of interrelated states or events such as in a state diagram. Moreover not all illustrated acts may be required to implement a methodology in accordance with one or more embodiments.

Referring to an example methodology is displayed that facilitates routing messages of a positioning protocol. At a mapping between a plurality of base stations identifiers and network area identifiers can be stored. At a message of a positioning protocol associated with a base station can be generated. For example as described the positioning protocol can be LPPa etc. and the message can relate to a position timing acknowledgement of a positioning information update and or one or more similar parameters. In another example the message can relate to a device served by the base station. At an identifier of the base station can be obtained. At a network area identifier associated with the base station can be determined. As described for example this can be determined based at least in part on locating the network area identifier in the stored mapping of network area identifiers to base station identifiers. At the message can be delivered to an intermediate network node based at least in part on the network area identifier. As described for example the intermediate network node can be an MME the network area identifier can be a TAI etc.

Turning to an example methodology is displayed that facilitates routing messages of a positioning protocol. At a network area identifier related to a base station can be received in a message of a positioning protocol. At it can be determined whether a gateway is present e.g. whether the base station is served by the gateway . For example this can be based at least in part on analyzing a mapping of network area identifiers to gateway identifiers to determine whether the received network area identifier is associated with a gateway. If so at an eNB identifier can be included in the message and at the message can be delivered to the gateway. If the gateway is not present at the message can be delivered to the base station.

Referring to illustrated is an example methodology for updating positioning information. At one or more messages can be received from a positioning server as described above. At modification of one or more parameters related to a position can be detected. For example this can include detecting a change in location e.g. based at least in part on monitored coordinates . At a message including the one or more parameters as modified can be communicated to the positioning server. For example the message can be of the positioning protocol of the one or more messages received from the positioning server as described.

It will be appreciated that in accordance with one or more aspects described herein inferences can be made regarding associating network area identifiers with base station identifiers or HeNB gateway identifiers determining an intermediate network node or HeNB gateway based at least in part upon the network area identifiers and or the like as described. As used herein the term to infer or inference refers generally to the process of reasoning about or inferring states of the system environment and or user from a set of observations as captured via events and or data. Inference can be employed to identify a specific context or action or can generate a probability distribution over states for example. The inference can be probabilistic that is the computation of a probability distribution over states of interest based on a consideration of data and events. Inference can also refer to techniques employed for composing higher level events from a set of events and or data. Such inference results in the construction of new events or actions from a set of observed events and or stored event data whether or not the events are correlated in close temporal proximity and whether the events and data come from one or several event and data sources.

Memory can additionally store protocols and or algorithms associated with estimating and or utilizing a channel e.g. performance based capacity based etc. updating positioning information or substantially any other aspect described herein. It will be appreciated that memory can be either volatile memory or nonvolatile memory or can include both volatile and nonvolatile memory. By way of illustration and not limitation nonvolatile memory can include read only memory ROM programmable ROM PROM electrically programmable ROM EPROM electrically erasable PROM EEPROM or flash memory. Volatile memory can include random access memory RAM which acts as external cache memory. By way of illustration and not limitation RAM is available in many forms such as synchronous RAM SRAM dynamic RAM DRAM synchronous DRAM SDRAM double data rate SDRAM DDR SDRAM enhanced SDRAM ESDRAM Synchlink DRAM SLDRAM and direct Rambus RAM DRRAM . The memory of the subject systems and methods is intended to comprise without being limited to these and any other suitable types of memory and can generally be a data store as described herein.

Processor is further optionally coupled to a configuration modification detecting component which can be similar to a configuration modification detecting component and a positioning server communicating component which can be similar to a positioning server communicating component . In this regard the configuration modification detecting component and positioning server communicating component can utilize processor to execute one or more functions described herein memory to store such instructions or parameters related thereto and or the like.

Moreover for example processor can modulate signals to be transmitted using modulator and transmit modulated signals using transmitter . Transmitter can transmit signals to mobile devices over Tx antennas . Furthermore although depicted as being separate from the processor it is to be appreciated that configuration modification detecting component positioning server communicating component demodulator and or modulator can be part of the processor or multiple processors not shown .

Referring to in one aspect any of network nodes or etc. e.g. may be represented by computer device . Computer device includes a processor for carrying out processing functions associated with one or more of components and functions described herein. Processor can include a single or multiple set of processors or multi core processors. Moreover processor can be implemented as an integrated processing system and or a distributed processing system.

Computer device further includes a memory such as for storing local versions of applications being executed by processor . Memory can include substantially any type of memory usable by a computer such as random access memory RAM read only memory ROM tapes magnetic discs optical discs volatile memory non volatile memory and any combination thereof.

Further computer device includes a communications component that provides for establishing and maintaining communications with one or more parties utilizing hardware software and services as described herein. Communications component may carry communications between components on computer device as well as between computer device and external devices such as devices located across a communications network and or devices serially or locally connected to computer device . For example communications component may include one or more buses and may further include transmit chain components and receive chain components associated with a transmitter and receiver respectively operable for interfacing with external devices.

Additionally computer device may further include a data store which can be any suitable combination of hardware and or software that provides for mass storage of information databases and programs employed in connection with aspects described herein. For example data store may be a data repository for applications not currently being executed by processor .

Computer device may optionally include a interface component operable to receive inputs from a user of computer device and further operable to generate outputs for presentation to the user. Interface component may include one or more input devices including but not limited to a keyboard a number pad a mouse a touch sensitive display a navigation key a function key a microphone a voice recognition component any other mechanism capable of receiving an input from a user or any combination thereof. Further interface component may include one or more output devices including but not limited to a display a speaker a haptic feedback mechanism a printer any other mechanism capable of presenting an output to a user or any combination thereof. In another example interface component can be an application programming interface API that can be accessed by one or more devices to perform functions on computer device .

In addition in the depicted example computer device can optionally include one or more of a message component network area identifier determining component message routing component message receiving component or gateway presence determining component . Thus these components and or which can be similar to other components described herein can utilize processor to execute instructions associated therewith memory to store information associated therewith communications component to carry out communications and or the like as described. In addition it is to be appreciated that computer device can include additional or alternative components described herein.

With reference to illustrated is a system that routes messages of a positioning protocol. For example system can reside at least partially within an eSMLC or other core network component etc. It is to be appreciated that system is represented as including functional blocks which can be functional blocks that represent functions implemented by a processor software or combination thereof e.g. firmware . System includes a logical grouping of electrical components that can act in conjunction. For instance logical grouping can include an electrical component for generating a message of a positioning protocol associated with a base station . As described the message can include one or more parameters related to positioning timing acknowledging a positioning update and or the like. Further logical grouping can comprise an electrical component for determining a network area identifier associated with the base station .

As described for example electrical component can store mappings of network area identifiers to base station identifiers e.g. in memory or otherwise for subsequently determining the network area identifier associated with an identifier of the base station. Moreover logical grouping can include an electrical component for delivering the message to an intermediate network node based at least in part on the network area identifier . For example electrical component can include a message component as described above. In addition for example electrical component in an aspect can include a network area identifier determining component as described above. Furthermore electrical component in an aspect can include a message routing component as described. Additionally system can include a memory that retains instructions for executing functions associated with the electrical components and . While shown as being external to memory it is to be understood that one or more of the electrical components and can exist within memory .

In one example electrical components and can comprise at least one processor or each electrical component and can be a corresponding module of at least one processor. Moreover in an additional or alternative example electrical components and can be a computer program product comprising a computer readable medium where each electrical component and can be corresponding code.

With reference to illustrated is a system that routes messages of a positioning protocol. For example system can reside at least partially within an MME or other core network component etc. It is to be appreciated that system is represented as including functional blocks which can be functional blocks that represent functions implemented by a processor software or combination thereof e.g. firmware . System includes a logical grouping of electrical components that can act in conjunction. For instance logical grouping can include an electrical component for receiving a network area identifier related to a base station in a message of a positioning protocol . Further logical grouping can comprise an electrical component for determining whether a gateway is present based at least in part on the network area identifier . As described for example electrical component can store mappings of network area identifiers to identifiers of gateways and can determine presence of the gateway based at least in part on locating the network area identifier in the mappings.

Moreover logical grouping can include an electrical component for delivering the message to a network node based at least in part on whether the gateway is present . As described where the gateway is present electrical component can deliver the message to the gateway and can include an identifier of the base station in the message. Where the gateway is not present for example electrical component can deliver the message to the base station. For example electrical component can include a message receiving component as described above. In addition for example electrical component in an aspect can include a gateway presence determining component as described above. Furthermore electrical component in an aspect can include a message routing component as described. Additionally system can include a memory that retains instructions for executing functions associated with the electrical components and . While shown as being external to memory it is to be understood that one or more of the electrical components and can exist within memory .

In one example electrical components and can comprise at least one processor or each electrical component and can be a corresponding module of at least one processor. Moreover in an additional or alternative example electrical components and can be a computer program product comprising a computer readable medium where each electrical component and can be corresponding code.

With reference to illustrated is a system that updates positioning information. For example system can reside at least partially within a base station mobile device etc. It is to be appreciated that system is represented as including functional blocks which can be functional blocks that represent functions implemented by a processor software or combination thereof e.g. firmware . System includes a logical grouping of electrical components that can act in conjunction. For instance logical grouping can include an electrical component for detecting modification of one or more parameters related to a position . As described electrical component can monitor parameters such as a location e.g. GPS location and or the like.

Further logical grouping can comprise an electrical component for communicating a message to the positioning server including the one or more parameters as modified . As described for example electrical component can utilize one or more messages available in the positioning protocol for communicating the message. For example in an aspect electrical component can include configuration modification detecting component as described above. In addition for example electrical component in an aspect can include positioning server communicating component as described above. Additionally system can include a memory that retains instructions for executing functions associated with the electrical components and . While shown as being external to memory it is to be understood that one or more of the electrical components and can exist within memory .

In one example electrical components and can comprise at least one processor or each electrical component and can be a corresponding module of at least one processor. Moreover in an additional or alternative example electrical components and can be a computer program product comprising a computer readable medium where each electrical component and can be corresponding code.

Referring now to a wireless communication system is illustrated in accordance with various embodiments presented herein. System comprises a base station that can include multiple antenna groups. For example one antenna group can include antennas and another group can comprise antennas and and an additional group can include antennas and . Two antennas are illustrated for each antenna group however more or fewer antennas can be utilized for each group. Base station can additionally include a transmitter chain and a receiver chain each of which can in turn comprise a plurality of components associated with signal transmission and reception e.g. processors modulators multiplexers demodulators demultiplexers antennas etc. as is appreciated.

Base station can communicate with one or more mobile devices such as mobile device and mobile device however it is to be appreciated that base station can communicate with substantially any number of mobile devices similar to mobile devices and . Mobile devices and can be for example cellular phones smart phones laptops handheld communication devices handheld computing devices satellite radios global positioning systems PDAs and or any other suitable device for communicating over wireless communication system . As depicted mobile device is in communication with antennas and where antennas and transmit information to mobile device over a forward link and receive information from mobile device over a reverse link . Moreover mobile device is in communication with antennas and where antennas and transmit information to mobile device over a forward link and receive information from mobile device over a reverse link . In a frequency division duplex FDD system forward link can utilize a different frequency band than that used by reverse link and forward link can employ a different frequency band than that employed by reverse link for example. Further in a time division duplex TDD system forward link and reverse link can utilize a common frequency band and forward link and reverse link can utilize a common frequency band.

Each group of antennas and or the area in which they are designated to communicate can be referred to as a sector of base station . For example antenna groups can be designed to communicate to mobile devices in a sector of the areas covered by base station . In communication over forward links and the transmitting antennas of base station can utilize beamforming to improve signal to noise ratio of forward links and for mobile devices and . Also while base station utilizes beamforming to transmit to mobile devices and scattered randomly through an associated coverage mobile devices in neighboring cells can be subject to less interference as compared to a base station transmitting through a single antenna to all its mobile devices. Moreover mobile devices and can communicate directly with one another using a peer to peer or ad hoc technology as depicted. According to an example system can be a multiple input multiple output MIMO communication system.

At base station traffic data for a number of data streams is provided from a data source to a transmit TX data processor . According to an example each data stream can be transmitted over a respective antenna. TX data processor formats codes and interleaves the traffic data stream based on a particular coding scheme selected for that data stream to provide coded data.

The coded data for each data stream can be multiplexed with pilot data using orthogonal frequency division multiplexing OFDM techniques. Additionally or alternatively the pilot symbols can be frequency division multiplexed FDM time division multiplexed TDM or code division multiplexed CDM . The pilot data is typically a known data pattern that is processed in a known manner and can be used at mobile device to estimate channel response. The multiplexed pilot and coded data for each data stream can be modulated e.g. symbol mapped based on a particular modulation scheme e.g. binary phase shift keying BPSK quadrature phase shift keying QPSK M phase shift keying M PSK M quadrature amplitude modulation M QAM etc. selected for that data stream to provide modulation symbols. The data rate coding and modulation for each data stream can be determined by instructions performed or provided by processor .

The modulation symbols for the data streams can be provided to a TX MIMO processor which can further process the modulation symbols e.g. for OFDM . TX MIMO processor then provides NT modulation symbol streams to NT transmitters TMTR through . In various embodiments TX MIMO processor applies beamforming weights to the symbols of the data streams and to the antenna from which the symbol is being transmitted.

Each transmitter receives and processes a respective symbol stream to provide one or more analog signals and further conditions e.g. amplifies filters and upconverts the analog signals to provide a modulated signal suitable for transmission over the MIMO channel. Further NT modulated signals from transmitters through are transmitted from NT antennas through respectively.

At mobile device the transmitted modulated signals are received by NR antennas through and the received signal from each antenna is provided to a respective receiver RCVR through . Each receiver conditions e.g. filters amplifies and downconverts a respective signal digitizes the conditioned signal to provide samples and further processes the samples to provide a corresponding received symbol stream.

An RX data processor can receive and process the NR received symbol streams from NR receivers based on a particular receiver processing technique to provide NT detected symbol streams. RX data processor can demodulate deinterleave and decode each detected symbol stream to recover the traffic data for the data stream. The processing by RX data processor is complementary to that performed by TX MIMO processor and TX data processor at base station .

The reverse link message can comprise various types of information regarding the communication link and or the received data stream. The reverse link message can be processed by a TX data processor which also receives traffic data for a number of data streams from a data source modulated by a modulator conditioned by transmitters through and transmitted back to base station .

At base station the modulated signals from mobile device are received by antennas conditioned by receivers demodulated by a demodulator and processed by a RX data processor to extract the reverse link message transmitted by mobile device . Further processor can process the extracted message to determine which precoding matrix to use for determining the beamforming weights.

Processors and can direct e.g. control coordinate manage etc. operation at base station and mobile device respectively. Respective processors and can be associated with memory and that store program codes and data. Processors and can also perform computations to derive frequency and impulse response estimates for the uplink and downlink respectively.

Referring again to the owner of a femto node can subscribe to mobile service such as for example 3G mobile service offered through the mobile operator core network . In addition an access terminal can be capable of operating both in macro environments and in smaller scale e.g. residential network environments. Thus for example depending on the current location of the access terminal the access terminal can be served by an access node or by any one of a set of femto nodes e.g. the femto nodes A and B that reside within a corresponding user residence . For example when a subscriber is outside his home he is served by a standard macro cell access node e.g. node and when the subscriber is at home he is served by a femto node e.g. node A . Here it should be appreciated that a femto node can be backward compatible with existing access terminals .

A femto node can be deployed on a single frequency or in the alternative on multiple frequencies. Depending on the particular configuration the single frequency or one or more of the multiple frequencies can overlap with one or more frequencies used by a macro cell access node e.g. node . In some aspects an access terminal can be configured to connect to a preferred femto node e.g. the home femto node of the access terminal whenever such connectivity is possible. For example whenever the access terminal is within the user s residence it can communicate with the home femto node .

In some aspects if the access terminal operates within the mobile operator core network but is not residing on its most preferred network e.g. as defined in a preferred roaming list the access terminal can continue to search for the most preferred network e.g. femto node using a Better System Reselection BSR which can involve a periodic scanning of available systems to determine whether better systems are currently available and subsequent efforts to associate with such preferred systems. Using an acquisition table entry e.g. in a preferred roaming list in one example the access terminal can limit the search for specific band and channel. For example the search for the most preferred system can be repeated periodically. Upon discovery of a preferred femto node such as femto node the access terminal selects the femto node for camping within its coverage area.

A femto node can be restricted in some aspects. For example a given femto node can only provide certain services to certain access terminals. In deployments with so called restricted or closed association a given access terminal can only be served by the macro cell mobile network and a defined set of femto nodes e.g. the femto nodes that reside within the corresponding user residence . In some implementations a femto node can be restricted to not provide for at least one access terminal at least one of signaling data access registration paging or service.

In some aspects a restricted femto node which can also be referred to as a Closed Subscriber Group HeNB is one that provides service to a restricted provisioned set of access terminals. This set can be temporarily or permanently extended as necessary. In some aspects a Closed Subscriber Group CSG can be defined as the set of access nodes e.g. femto nodes that share a common access control list of access terminals. A channel on which all femto nodes or all restricted femto nodes in a region operate can be referred to as a femto channel.

Various relationships can thus exist between a given femto node and a given access terminal. For example from the perspective of an access terminal an open femto node can refer to a femto node with no restricted association. A restricted femto node can refer to a femto node that is restricted in some manner e.g. restricted for association and or registration . A home femto node can refer to a femto node on which the access terminal is authorized to access and operate on. A guest femto node can refer to a femto node on which an access terminal is temporarily authorized to access or operate on. An alien femto node can refer to a femto node on which the access terminal is not authorized to access or operate on except for perhaps emergency situations e.g. 911 calls .

From a restricted femto node perspective a home access terminal can refer to an access terminal that authorized to access the restricted femto node. A guest access terminal can refer to an access terminal with temporary access to the restricted femto node. An alien access terminal can refer to an access terminal that does not have permission to access the restricted femto node except for perhaps emergency situations for example 911 calls e.g. an access terminal that does not have the credentials or permission to register with the restricted femto node .

For convenience the disclosure herein describes various functionality in the context of a femto node. It should be appreciated however that a pico node can provide the same or similar functionality as a femto node but for a larger coverage area. For example a pico node can be restricted a home pico node can be defined for a given access terminal and so on.

A wireless multiple access communication system can simultaneously support communication for multiple wireless access terminals. As mentioned above each terminal can communicate with one or more base stations via transmissions on the forward and reverse links. The forward link or downlink refers to the communication link from the base stations to the terminals and the reverse link or uplink refers to the communication link from the terminals to the base stations. This communication link can be established via a single in single out system a MIMO system or some other type of system.

The various illustrative logics logical blocks modules components and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration. Additionally at least one processor may comprise one or more modules operable to perform one or more of the steps and or actions described above. An exemplary storage medium may be coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. Further in some aspects the processor and the storage medium may reside in an ASIC. Additionally the ASIC may reside in a user terminal. In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more aspects the functions methods or algorithms described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored or transmitted as one or more instructions or code on a computer readable medium which may be incorporated into a computer program product. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage medium may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also substantially any connection may be termed a computer readable medium. For example if software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs usually reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

While the foregoing disclosure discusses illustrative aspects and or embodiments it should be noted that various changes and modifications could be made herein without departing from the scope of the described aspects and or embodiments as defined by the appended claims. Furthermore although elements of the described aspects and or embodiments may be described or claimed in the singular the plural is contemplated unless limitation to the singular is explicitly stated. Additionally all or a portion of any aspect and or embodiment may be utilized with all or a portion of any other aspect and or embodiment unless stated otherwise.

