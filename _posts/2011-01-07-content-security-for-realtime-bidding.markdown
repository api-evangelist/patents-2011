---

title: Content security for real-time bidding
abstract: A real-time-bidding process that includes security mechanisms that limits access to various aspects of the bidding process including communications between bidders, the user browser, and the auctioneer, and the content of bids received and utilized by the user browser.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08554683&OS=08554683&RS=08554683
owner: Fox Audience Network, Inc.
number: 08554683
owner_city: Los Angeles
owner_country: US
publication_date: 20110107
---
This patent application is a continuation in part of U.S. patent application Ser. No. 11 959 385 filed Dec. 18 2007 now abandoned which claims priority to U.S. Provisional Application Serial No. 60 876 026 filed Dec. 19 2006. This application also claims the benefit of U.S. Provisional Application Serial No. 61 293 430 filed Jan. 8 2010. These above listed patent applications as well as the information disclosure statement filed on Jul. 2 2008 in connection with the above identified 385 patent application are incorporated herein by this reference.

This invention relates generally to online advertising and in particular to a method apparatus and article of manufacture for encrypting securing data content during a real time advertising auction process.

Online advertising has become an integral part of the Internet. Different models exist for advertisers to purchase advertisements displayed to end users. Further advertisers are often willing to pay a premium for a targeted advertisement based on a user s profile demographic etc. Online auctions that are controlled by an end user s browser may be utilized to sell a particular advertisement impression for a particular user. However in such an online auction it is desirable to maintain security of i.e. limited access to all of the data exchanged e.g. user privacy and advertiser data security .

Prior art mechanisms fail to provide a secure environment for such an online auction. These problems may be better understood with a more detailed description of prior art online display advertising and bidding processes.

Online display advertising faces many inefficiencies in supply and demand. On the supply side large publishers and ad networks sell excess inventory in bulk yielding an eCPM effective cost per thousand impressions . As used herein the term impression refers to a view ad view or load of an advertisement. On the demand side ad networks and exchanges that have gathered unique demographic behavioral and interest information on end users are not able to find all the impressions they need to fulfill their budgets. In general the core of the inefficiency is two fold 1 different siloed auctioning systems do not talk to one another on an impression by impression basis and 2 buyers do not have access to their cookies on the end user before taking possession of the impression.

Cookies are small pieces of text stored on a user s computer by a web browser. The information in the cookie is sent from a particular domain to the web browser and each particular cookie is only accessible from the domain that originally sent the information. Consequently oftentimes an advertiser has knowledge about particular users i.e. their preferences practices etc. but when a third party web page has code that instructs the browser to request an advertisement the advertiser does not have access to the end user s cookies before purchasing the advertisement impression.

A real time bidding RTB mechanism may address the common web based advertising issues by providing the framework for an impression by impression first price or a second price auctioning system. Details describing such an RTB mechanism are described in U.S. patent application Ser. No. 11 959 385 filed on Dec. 18 2007 which is incorporated by reference herein. RTB allows potential buyers of an impression to look at that individual impression and decide the bid amount using their own systems and data behavioral profile etc. . Bidding is not for a group of impressions but for one specific impression. Further the bidding occurs as the impression occurs and not in advance of the impression. Accordingly information useful to bidding on a particular impression is known by the bidder. A browser side RTB auction takes place inside the end user s browser soliciting bids from the siloed systems awarding the win to the highest bidder and charging that bidder the amount it had bid. Unlike server to server or bid application programming interface API approaches in a browser side RTB mechanism bidders have access to their own respective cookies on the end user in real time which allows for cross platform frequency cap and budget management in addition to live behavioral and profile targeting. As a result browser side RTB allows buyers known as bidders to obtain substantially more impressions of highest value to them allowing them to deliver larger more valuable campaigns to their advertisers while translating all this to higher yields for end publishers.

One problem with the existing RTB mechanism is that of privacy security for the both the user and the advertiser. In other words an advertiser may build an extensive proprietary knowledge base e.g. behavioral or profile information for a particular user frequency information such as when and how often different ads are served to a particular user etc. . Further the advertiser may develop a proprietary bidding strategy for impressions in an RTB based system. Accordingly it is desirable to protect data while the data is in the browser. In addition it is desirable to obfuscate portions of the data as it passes through the browser from all parties including the browser itself i.e. it is desirable to obfuscate communications and bidding details once received . In this regard an advertiser bidder may not want competitors to know learn anything about the bid or bid amount.

Further it is desirable to restrict a phantom website from gathering metrics statistics on the bidding process e.g. by a competitor soliciting bids for selected advertisements . In other words it is desirable to prevent a browser that is conducting an auction from accessing information regarding the winning bids for an impression or who the winning bidder is for a particular impression. The prior art not only fails to recognize the problems described above but also fails to provide any protection mechanism to solve the problems.

One or more embodiments of the invention overcome the problems of the prior art by establishing a real time bidding process that includes security mechanisms that limits access to various aspects of the bidding process including communications between bidders the user browser and the auctioneer and the content of bids received and utilized by the user browser.

The detailed description set forth below in connection with the appended drawings is intended as a description of presently preferred embodiments of the invention and is not intended to represent the only forms in which the present invention may be constructed and or utilized. The description sets forth the functions and the sequence of steps for constructing and operating the invention in connection with the illustrated embodiments. However it is to be understood that the same or equivalent functions and sequences may be accomplished by different embodiments that are also intended to be encompassed within the spirit and scope of the invention.

A network such as the Internet connects clients to server computers . Network may utilize ethernet coaxial cable wireless communications radio frequency RF etc. to connect and provide the communication between clients and servers . Clients may execute a client application or web browser and communicate with server computers executing web servers . Such a web browser is typically a program such as MICROSOFT INTERNET EXPLORER Further the software executing on clients may be downloaded from server computer to client computers and installed as a plug in or ACTIVEX control of a web browser. For example an auction bidding application may be downloaded from the server and installed on web browser . In such an application as described in further detail below client is configured to communicate with multiple servers some of which are advertisers bidders bidding on an impression that is to be displayed on web browser .

Accordingly clients may utilize ACTIVEX components component object model COM or distributed COM DCOM components to provide a user interface on a display of client . The web server is typically a program such as MICROSOFT S INTERNET INFORMATION SERVER .

Web server may host an Active Server Page ASP or Internet Server Application Programming Interface ISAPI application which may be executing scripts. The scripts invoke objects that execute business logic referred to as business objects . The business objects then manipulate data in database through a database management system DBMS . Alternatively database may be part of or connected directly to client instead of communicating obtaining the information from database across network . When a developer encapsulates the business functionality into objects the system may be referred to as a COM system. Accordingly the scripts executing on web server and or application invoke COM objects that implement the business logic. Further server may utilize Microsoft s Transaction Server MTS to access required data stored in database via an interface such as ADO Active Data Objects OLE DB Object Linking and Embedding DataBase or ODBC Open DataBase Connectivity .

Generally these components all comprise logic and or data that is embodied in or retrievable from device medium signal or carrier e.g. a data storage device a data communications device a remote computer or device coupled to the computer via a network or via another data communications device etc. Moreover this logic and or data when read executed and or interpreted results in the steps necessary to implement and or use the present invention being performed.

Thus embodiments of the invention may be implemented as a method apparatus system or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof. The term article of manufacture or alternatively computer program product as used herein is intended to encompass logic and or data accessible from any computer readable device carrier or media.

Those skilled in the art will recognize many modifications may be made to this exemplary environment without departing from the scope of the present invention. For example those skilled in the art will recognize that any combination of the above components or any number of different components including different logic data different peripherals and different devices may be used to implement the present invention so long as similar functions are performed thereby. For example rather than utilizing the browser web server based implementation of embodiments of the invention can be implemented using any application that can execute the functionality described herein over an IP internet protocol network. In this regard embodiments of the invention may be utilized to determine advertisements in a game IPHONE application IPOD TOUCH application personal digital assistant PDA application cellular phone device or any type of application executing over an IP network or other type of network.

Embodiments of the invention may be utilized by bidders and sellers using RTB. The number of participants that may participate in the bidding process may be limited by practicality. In this regard performance may be impacted as more bidders are added due to the need for the browser to issue separate calls to each bidder. Given such limitations target participants may include companies that introduce exclusive inventory exclusive data about end users or exclusive advertiser campaigns such as 

However embodiments of the invention are not limited to the above identified participants. For example RTB may be utilized for ad agencies across their clients in a demand side platform based implementation.

2. The user s browser will make a request for an ad impression from the auctioneer s ad server using that server s standard ad tag embedded in the web page.

3. The auctioneer will conduct an auction internal to its system and decide on the best traditional not including RTB opportunities creative it has. This creative is called the reserve creative and it has a reserve CPM set by the auctioneer.

4. The auctioneer will decide who amongst the number of ready bidders will be chosen to bid for this impression. A variety of different mechanisms may be utilized to control the volume of calls to any particular bidder e.g. to help limit scale issues. For example impressions can be randomly skipped or a sophisticated selection algorithm may be utilized. An example of one potential volume control implementation includes 

5. The auctioneer will decide on a scale factor for this impression and send to the browser the RTB JavaScript detailed in Appendix A which is incorporated by reference herein . This contains a number of elements 

 a The scaled version of the auctioneer s reserve CPM price. This value is passed unencrypted to the browser and is the auctioneer s estimate of what this impression is worth based on competition available in the form of direct sold offers CPM CPC cost per click or CPA cost per auction sale and non RTB ad network partners. It may be noted that a bid may be received in CPC or CPA form that could then be converted into a CPM to include in the auction.

 b The URL uniform resource locator of the ad selected above by the auctioneer. If no bidder wins the auction this will be the ad displayed to the end user.

6. The browser then initiates the specific RTB calls to the bidders selected for consideration for this impression and waits for all responses to be received up to a predefined maximum amount of time.

7. Since the bid request is from the browser to the bidder s ad server the bidder will be connected to the end user s browser from within the bidder s own domain. This allows the bidder to read all necessary cookies in the same manner as a regular redirected ad impression. Moreover this allows the bidder to enforce ad eligibility frequency controls delivery and geography controls etc. in the same manner as regular redirected impressions.

 d Other optional parameters. For instance minutes for the auctioneer to wait before sending another bid request for this user to this bidder s URL.

9. Once the browser receives responses from all bidders or the predetermined amount of time expires the browser s JavaScript code compares the scaled bids received with the scaled reserve CPM selects the winning ad and redirects the browser to the appropriate URL.

10. Finally the user s browser makes a special pixel call back to the auctioneer s ad servers to record the details of the winning ad and update the serving counts accordingly.

The auctioneer B then selects bidders C and decides on a scale i.e. the scaling factor used to obfuscate the actual CPM values as described above . The auctioneer B returns a RTB JavaScript JS code to the publisher A with a scaled reserve CPM a reserve creative Uniform Resource Locator URL and for each bidder selected a URL with a an encryption version b an API version c an encrypted scale and timestamp and d optional values e.g. age etc. . The RTB code is then transmitted from the publisher A to the user browser . As described above the encryption information includes the algorithm key and string used to encrypt the bidding information that is transmitted amongst the parties.

The code below is the humanly readable format of a minified JavaScript code that the auctioneer B will send to the user browser in accordance with one or more embodiments of the invention 

Once the end user browser receives the RTB code from publisher A the browser sends bid requests to each bidder and starts a timer. The bidders C decrypt the scale and timestamp and verify the recency of the bid request. Bidders C hold an internal auction or perform their own internal analysis and determine the bid that will be submitted. A JSON object is returned to the end user browser via the auctioneer B with either a no bid empty response or 1 a scaled bid CPM 2 a signature with the scaled bid CPM and a timestamp 3 a bidder creative URL and 4 optional values e.g. a minimum time . As described above the scaled bid CPM 1 may not be encrypted. Further the signature that embodies the scaled bid CPM and timestamp may be utilized to confirm the identity of the bidder C. The minimum time provides the ability for the bidder C to specify the minutes for the auctioneer B to wait before sending another bid request for this user to a particular bidder s C URL.

The end user browser picks the winning bid when all bids have arrived or when the auction times out. For each bidder the browser creates a package that includes 1 the bidder ID 2 the scaled bid CPM 3 an encrypted string that contains the scale and the current timestamp and 4 a signature embodying the scaled bid CPM and a timestamp.

The browser makes a determination regarding who won the bid e.g. whether a bidder C or the reserve amount . If no bid has met the reserve amount established the auctioneer B records the reserve as the winner records all bidder C packages and sends an ad to the end user browser via the bidder C. Alternatively if the bidder C wins the ad the auctioneer B records all bidder packages verifies the signature using the scaled bid CPM and timestamp decrypts the encrypted string that has the scale and current timestamp and verifies the recency of the bid. In addition the auctioneer B records the bidder C as the winner with the descaled CPM. The bidder C then transmits the advertisement to the browser where the winning ad is displayed.

The auctioneer B works with each of the bidder C and determine details regarding a GET HTTP hyper text transfer protocol request for the URL the bidding URL request call bid call etc. that dictates how the auctioneer will request bids from a particular bidder.

Table A illustrates mandatory placeholders that may be utilized in accordance with a first request format.

At runtime the auctioneer B may expand the placeholders with their appropriate values. For example if the placeholders had these values 

Then the fully expanded and populated calls corresponding to the example bidding URLs above would respectively be 

Once a request has been issued per the above the bidder C responds. The description herein illustrates an example response format. The bidder C may respond with a JSON object with mime type of text html. The names of this object s individual data elements are defined for a specific API version across all auctioneers B and bidders C. Neither the auctioneer B nor the bidder C can change the naming convention of the response JSON object since each JavaScript codebase associated with an API version expects a specific set of names in JSON for the JavaScript to function properly.

 b sb A fixed string name whose value SCALED BID CPM is an integer containing the scaled bid in cost per 10 000 000 impressions. For example for a bid of 0.738279 eCPM the bid value should be the integer 7383 and with a scale factor of 5 for this impression the value of sb would be 36915 scale factor trunc 10 000 the real CPM . The reason a cost per 10 000 000 is utilized is to be able to support CPM values lower than 1.00 CPM in an integer format 

s A fixed string name whose value SIGNATURE is the output of the hash function that has as input the concatenation using a pipe delimiter of the text representation of the sb value and the text representation of the decrypted value of the timestamp found in ENCRYPTED SCALE TIMESTAMP placeholder passed by the auctioneer B to the bidder C on the bid request. If this bidder C wins this signature makes its way to the auctioneer B who compares it to the hash function that the auctioneer B generates out of the sb and the value of timestamp found in the ENCRYPTED SCALE TIMESTAMP that s being passed along since the bidding event started. If the two signatures match then the auctioneer B tags this response as valid otherwise it records it in the Signatures not matching error condition log 

ad A fixed string name whose value AD is the URL of the ad to be displayed if the bidder C wins this bidding event.

 e mt A fixed string name whose value MINIMUM TIME is the least amount of time the bidder C wants the auctioneer B not to call the bidder C again for this user for this bidding URL. The amount is in minutes e.g. 30 means 30 minutes . This mechanism allows the bidder C control over the users it does not want to see. If this value is sent the auctioneer B needs to enforce it.

At runtime the bidder C will substitute the placeholders with their appropriate values. For example if the placeholders had these values SCALED BID CPM 36915 SIGNATURE heyty3rde1 AD http bid.bidder.com var2 26463 size 160600 random 633456915 MINIMUM TIME 30 and if the CALLBACK string from the bid request was CALLBACK XhYmshu182 Then the example JSON response for a regular bid will be Where 

The JSON response in case the bidder C is unable to decrypt the auctioneer s B encrypted scale timestamp may be XhYmshu182 e value 5 desc Decryption error mt 30 where 

The bidder C should not change or use the http return code to indicate any bidding response condition.

For completeness once the auction closes and the auctioneer B is notified the latter will decrypt the value of the ENCRYPTED SCALE TIMESTAMP that it generated at the beginning of the bidding event parse out the unencrypted timestamp and use it to compare against the current timestamp in its system. If the two timestamps are within some time period then the auctioneer B will consider this a normal conclusion of auction otherwise it will record a Timestamps too far out error condition.

At the auctioneer B system the auctioneer B may choose to restrict bids to specific ad impressions based on various criteria and algorithms of its own choosing which may be the same as those used in choosing when to server traditional non RTB ads. For example RTB campaigns may be set up the same way network sell campaign tags are. A campaign can be targeted to the full extent of the auctioneer s B ad server s capabilities which could include but may not be limited to 

However actual trafficking is negotiated between the auctioneer s B sales team and the bidder s C media buying group. The standard trafficking is Run of Site ROS Run of Network RON with no further information passed from auctioneer B to bidder C other than the mandatory request placeholders.

A number of measures are included to ensure secure communications and 25 minimization of fraudulent activity 

 1 To avoid manipulation of the auction script all function names variable names class names and constants are dynamically generated random strings for each bidding event.

 2 To avoid malicious spider requests and using the previously exchanged private key the auctioneer B passes an encrypted value of the scale and the timestamp on the request call to the bidder C. The bidder C decrypts this value to recover the original timestamp and verifies the authenticity of the call by checking that this passed timestamp is within an acceptable amount of time from the bidder s C own current timestamp.

 3 To hide returned bid values from human eyes and from tools like browser toolbars browser add ons etc. the bidder C returns the bid CPM as a scaled value. The scale used is a random number generated for each bidding event and passed by the auctioneer B to the bidder C using the encryption key known only to the auctioneer B and this bidder C. Only this bidder C knows how to decrypt the scale and use it to scale up its bid CPM.

 4 To avoid tampering of the winner bid the bidder C returns together with the scaled CPM a signature which is a hash function embodying the scaled CPM and the value of the original timestamp the auctioneer s . The auctioneer B generates the same signature out of the same base parameters of scaled CPM and the original timestamp. The auctioneer B verifies the validity of the bidder C. Further by checking the decrypted timestamp which is passed along in this bidding event to the current timestamp at the auctioneer B system the auctioneer B is also able to verify the recency of the bid.

Although the above description enables the basic operation of the RTB mechanism a number of functions may be built around the RTB system in order for both auctioneer B and bidder C to control its process. Table D describes the most important of these functions and is provided as guidance to auctioneers B or bidders C 

To utilize the RTB system and understanding and agreement must be adopted between the auctioneer B and the bidder C. The following illustrates an example of general timeline for adopting such an understanding 

 2 Auctioneer B and bidder C understand their confidence intervals around their own system s eCPM estimation capability 

 3 Auctioneer B develops the auction initiation code and the bidder C develops the bid response code in their respective ad servers 

 7 Both parties B C launch with agreed upon initial capacity can be as small as 1 million requests per day 

 10 Both parties B C ramp up by growing request volume over time monitoring profit margins and continually scrutinizing all metrics.

With full technical development support this timeline could be as short as three to four weeks for both auctioneers B and bidders C. Once two parties have conducted an RTB auction i.e. with different parties the two parties can easily conduct an auction with each other using the already adopted understanding

In one or more embodiments all bids scaled encrypted or otherwise are in United States dollars. Full currency support may also be provided in RTB.

A second price auction may also be provided. In a first price RTB auction implementation the bidder C pays the amount it had bid if it wins the impression. Depending on demand from bidding members a second price auction version may also be utilized. In a second price auction instead of each bidder s C JSON response object containing only a single scaled bid it would contain two. One would be the max this bidder is willing to pay for this impression and the second a lower value would be an amount incrementally higher than the second highest CPM that the bidder C has in its own system. The final winner is either the reserve CPM or the bidder C whose max bid was the highest CPM. However if a bidder C wins this bidder C would pay an amount only incrementally higher than the second highest max CPM value in the RTB auction.

A publisher A may also block advertisements. In one or more embodiments there is no automated mechanism for the auctioneer B to let bidders C know that the publisher A owning this impression needs to block certain advertisers types of advertisers or characteristics of creatives from bidding winning and displaying ads on the publisher s A site. Such types of blocking information may be communicated offline and entered trafficked manually into the bidder s C system. Alternatively an automated mechanism may be utilized that brings RTB to those publishers A who want to maintain control over the types of ads they receive by reducing through automation their campaign management costs.

In broad terms such an automated mechanism adds a new mandatory placeholder to the bid request URL. The value of this placeholder could be a number e.g. 4.187 that once appended to a URL predefined by the auctioneer B would denote both the ID 4 of the end publisher A from where the impression is emanating as well as the sequential ID 187 of the blocking rules that need to be abided by for this impression. This URL defines the location of the XML document that contains all the blocking rules for all impressions coming from this end publisher A through this auctioneer B. Since the blocking rules do not change very often the bidder C may cache the latest versions of each of these XML documents on a per auctioneer B and per publisher A basis. When the bidder C sees a new placeholder that it does not have in cache it would read this new XML document in real time and act accordingly going forward. The bidder C may not bid on the bid request containing a new sequential ID in order not to create latency in the response. In addition the standardization of major types of advertisers and creative attributes may benefit all auctioneers B and bidders C as they use the same industry wide taxonomy and cut campaign management trafficking costs.

The advertiser may also block a particular publisher A based on domain publisher ID or publisher category. If blocking is based on domains the end publisher domain of the impression may be passed to the bidder C. The publisher A ID may also be passed to the bidder C. Further the list of publisher IDs and their names may be shared. Such sharing may be provided as part of the real time call as another XML document that the bidder C reads thereby exposing the publisher IDs to the bidder C for it to block or target.

To block by publisher A category an ID that indicates the category of the publisher from where this impression comes may be passed to the bidder C. Although this ID can be used for blocking the major types of content may also be standardized benefiting all auctioneers B and bidders C by sharing the same industry wide taxonomy and cutting costs. To allow the bidder C to block target properly the current list of publisher A category IDs and their names may also be shared as yet another pointer to another XML document that the bidder C can read and expose internally to its traffickers.

The reporting of requests won bid counts and total dollars spent may be reported through an API so as to cut down on the cost of labor needed to read these values from one console and enter into the other.

To minimize the possibility of fraud data values may be encrypted by scaling the bids and encrypting both the bids and the timestamp. Additionally more of the data values passed on the bid request URL may also be encrypted e.g. demographic behavioral and contextual nature data .

A single state variable is one where the characteristic of the impression for that variable can only be in one state at any given time e.g. age of end user above or below the fold for the placement of an ad on the page etc. . Additional single state marketing data may also be standardized.

A multi state variable is one where the impression s characteristic for that variable can be in more than one state at any given time. A number of key pieces of data may be multi state such as contextual categories channels and end user hypertargets behaviors intents life stages. For contextual categories channels a particular impression can have a number of contexts at varying degrees of relevance. For example an impression from a page that foremost discusses financed auto insurance could be tagged by car insurance and loans each at a different probability level. The values passed could be utilized to standardize content pages. End user hypertargets behaviors intents life stages provide the ability for the end user to be responsible for a specific impression that can be tagged by a number of behaviors at varying confidence probability levels. For example tags may include extreme sport enthusiast interested in LASIK surgery and recently engaged at different confidences. The standardization of end user data points may benefit all auctioneers B and bidders C as they share the same industry wide taxonomy and cut costs.

In addition to the foregoing there are numerous alternative embodiments for equally accomplishing the present invention. For example any type of computer such as a mainframe minicomputer or personal computer or computer configuration such as a timesharing mainframe local area network or standalone personal computer could be used with the present invention. In summary embodiments of the invention provide for secure real time bidding implemented in a method apparatus system article of manufacture and or computer readable medium.

The foregoing is not intended to be exhaustive or to limit the invention to the precise form disclosed. While the present invention has been described with regards to particular embodiments it is recognized that additional variations of the present invention may be devised without departing from the inventive concept. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto.

