---

title: Method and apparatus for providing multi-threaded video decoding
abstract: An apparatus for enabling provision of multi-thread video decoding may include at least one processor and at least one memory including computer program code. The at least one memory and the computer program code may be configured, with the processor, to cause the apparatus to perform at least assigning decoding of a respective video frame to a corresponding thread for each core processor of a multi-core processor in which each respective video frame is divided into macroblock rows, resolving dependencies for each respective video frame at a macroblock row level, and providing synchronization for video decoding of each corresponding thread at the macroblock row level. A corresponding method and computer program product are also provided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08873638&OS=08873638&RS=08873638
owner: Nokia Corporation
number: 08873638
owner_city: Espoo
owner_country: FI
publication_date: 20110211
---
This application claims priority benefit to Indian Patent Application No. 336 CHE 2010 filed Feb. 11 2010 which is incorporated herein by reference in its entirety.

Embodiments of the present invention relate generally to video decoding technology and more particularly relate to a method and apparatus for multi threaded video decoding.

The modern communications era has brought about a tremendous expansion of wireline and wireless networks. Computer networks television networks and telephony networks are experiencing an unprecedented technological expansion fueled by consumer demand. Wireless and mobile networking technologies have addressed related consumer demands while providing more flexibility and immediacy of information transfer

Current and future networking technologies continue to facilitate ease of information transfer and convenience to users by expanding the capabilities of mobile electronic devices. Various applications and software have also been developed and continue to be developed in order to give the users robust capabilities to perform tasks communicate obtain information or services entertain themselves etc. in mobile environments. Given the robust capabilities of mobile electronic devices and the relatively small size of such devices it is becoming increasingly common for individuals to keep mobile electronic devices on or near their person on a nearly continuous basis. Moreover because such devices are useful for work play leisure entertainment and other purposes many users also interact with their devices on a frequent basis.

Along with the continuous development of new applications and improved networks that have expanded the capabilities of mobile electronic devices hardware improvements have also been introduced. In this regard the use of multi core processors has become very common in relation to improving the capabilities of fixed electronic devices e.g. personal computers PCs . While multi core processors can increase processing capability and have begun to see use in mobile communication devices more frequently due to their robust processing capabilities multi core processors may face some restrictions when used in connection with mobile electronic devices. Since mobile electronic devices are typically battery powered using a multi core processor could drain battery resources at a faster rate.

Accordingly strategies for reducing battery power during processing may be desirable when employing multi core processors in mobile electronic devices. Clocking multi core processors for mobile electronic devices at a lower rate relative to the clock speeds in PCs is one example of a strategy for managing mobile electronic device battery consumption. However it may be possible to experience the benefit of multi core processing while implementing other strategies that may improve battery consumption characteristics as well.

A method apparatus and computer program product are therefore provided for enabling the implementation of multi core decoding of video sequence data in multiple threads. Some embodiments may implement symmetric multi core processing SMP to process multiple threads of a video sequence with synchronization on a macroblock row level. Thus some embodiments may reduce overhead by requiring less frequent synchronization than alternative multi thread video decoding techniques. Accordingly battery consumption characteristics for multi core processors in mobile devices may be improved.

However embodiments may be employed in connection with fixed devices and or mobile devices having multi core processors to enable improved video decoding of higher resolution and higher frame rate video sequences.

In one exemplary embodiment a method of providing multi thread video decoding is provided. The method may include assigning decoding of a respective video frame to a corresponding thread for each core processor of a multi core processor in which each respective video frame is divided into macroblock rows resolving dependencies for each respective video frame at a macroblock row level and providing synchronization for video decoding of each corresponding thread at the macroblock row level.

In another exemplary embodiment a computer program product for providing multi thread video decoding is provided. The computer program product includes at least one computer readable storage medium having computer executable program code instructions stored therein. The computer executable program code instructions may include program code instructions for assigning decoding of a respective video frame to a corresponding thread for each core processor of a multi core processor in which each respective video frame is divided into macroblock rows resolving dependencies for each respective video frame at a macroblock row level and providing synchronization for video decoding of each corresponding thread at the macroblock row level.

In another exemplary embodiment an apparatus for providing multi thread video decoding is provided. The apparatus may include at least one processor and at least one memory including computer program code. The at least one memory and the computer program code may be configured with the processor to cause the apparatus to perform at least assigning decoding of a respective video frame to a corresponding thread for each core processor of a multi core processor in which each respective video frame is divided into macroblock rows resolving dependencies for each respective video frame at a macroblock row level and providing synchronization for video decoding of each corresponding thread at the macroblock row level.

Embodiments of the invention may provide a method apparatus and computer program product for employment in devices so that for example device users may enjoy improved capabilities with respect to applications and services accessible via the device.

Some embodiments of the present invention will now be described more fully hereinafter with reference to the accompanying drawings in which some but not all embodiments of the invention are shown. Indeed various embodiments of the invention may be embodied in many different forms and should not be construed as limited to the embodiments set forth herein rather these embodiments are provided so that this disclosure will satisfy applicable legal requirements. Like reference numerals refer to like elements throughout. As used herein the terms data content information and similar terms may be used interchangeably to refer to data capable of being transmitted received and or stored in accordance with embodiments of the present invention. Thus use of any such terms should not be taken to limit the spirit and scope of embodiments of the present invention.

Additionally as used herein the term circuitry refers to a hardware only circuit implementations e.g. implementations in analog circuitry and or digital circuitry b combinations of circuits and computer program product s comprising software and or firmware instructions stored on one or more computer readable memories that work together to cause an apparatus to perform one or more functions described herein and c circuits such as for example a microprocessor s or a portion of a microprocessor s that require software or firmware for operation even if the software or firmware is not physically present. This definition of circuitry applies to all uses of this term herein including in any claims. As a further example as used herein the term circuitry also includes an implementation comprising one or more processors and or portion s thereof and accompanying software and or firmware. As another example the term circuitry as used herein also includes for example a baseband integrated circuit or applications processor integrated circuit for a mobile phone or a similar integrated circuit in a server a cellular network device other network device and or other computing device.

As defined herein a computer readable storage medium which refers to a physical storage medium e.g. volatile or non volatile memory device can be differentiated from a computer readable transmission medium which refers to an electromagnetic signal. As used herein the term configured to should be understood to denote a structural construction or modification of a device or element to enable the performance of the corresponding function or action described in association therewith.

Some embodiments may be employed to for example provide an ability for a device employing a multi core processor to decode video content of a corresponding number of threads with synchronization being handled at the macroblock row level. By handling synchronization at the macroblock row level the amount of overhead necessary to manage synchronization is significantly reduced as compared to the overhead needed to synchronize at the macroblock level. Thus although embodiments could be employed in either fixed or mobile environments particularly in mobile environments the benefits of multi core processing may be experienced while increasing battery consumption efficiency.

Moreover embodiments may also be practiced in connection with fixed devices and not only in connection with mobile terminals. The mobile terminal of could be any of a number of types of mobile electronic devices such as for example portable digital assistants PDAs pagers mobile televisions gaming devices cellular phones all types of computers e.g. laptops or mobile computers cameras audio video players radios global positioning system GPS devices or any combination of the aforementioned and other types of communications systems.

The mobile terminal may include an antenna or multiple antennas in operable communication with a transmitter and a receiver . The mobile terminal may further include an apparatus such as a controller or other processing device that provides signals to and receives signals from the transmitter and receiver respectively.

The signals may include signaling information in accordance with the air interface standard of the applicable cellular system and or may also include data corresponding to user speech received data and or user generated data. In this regard the mobile terminal may be capable of operating with one or more air interface standards communication protocols modulation types and access types. By way of illustration the mobile terminal may be capable of operating in accordance with any of a number of first second third and or fourth generation communication protocols or the like. For example the mobile terminal may be capable of operating in accordance with second generation 2G wireless communication protocols IS 136 time division multiple access TDMA GSM global system for mobile communication and IS 95 code division multiple access CDMA or with third generation 3G wireless communication protocols such as Universal Mobile Telecommunications System UMTS CDMA2000 wideband CDMA WCDMA and time division synchronous CDMA TD SCDMA with 3.9 G wireless communication protocol such as E UTRAN evolved universal terrestrial radio access network with fourth generation 4G wireless communication protocols or the like. As an alternative or additionally the mobile terminal may be capable of operating in accordance with non cellular communication mechanisms. For example the mobile terminal may be capable of communication in a wireless local area network WLAN or other communication networks. However in some embodiments the mobile terminal or fixed device employing an example embodiment may not include communication capabilities with external devices.

It is understood that the controller may include circuitry implementing among others audio and logic functions of the mobile terminal . For example the controller may comprise one or more digital signal processor devices microprocessor devices and various analog to digital converters digital to analog converters and or other support circuits. Control and signal processing functions of the mobile terminal are allocated between these devices according to their respective capabilities. The controller thus may also include the functionality to convolutionally encode and interleave message and data prior to modulation and transmission. The controller may additionally include an internal voice coder and may include an internal data modem. Further the controller may include functionality to operate one or more software programs which may be stored in memory. For example the controller may be capable of operating a connectivity program such as a conventional Web browser. The connectivity program may then allow the mobile terminal to transmit and receive Web content such as location based content and or other web page content according to a Wireless Application Protocol WAP Hypertext Transfer Protocol HTTP and or the like for example. In an example embodiment the controller may be embodied as a multi core processor such as a dual or quad core processor. However any number of processors may be included in the controller .

The mobile terminal may also comprise a user interface including an output device such as an earphone or speaker a ringer a microphone a display and a user input interface which may be coupled to the controller . The user input interface which allows the mobile terminal to receive data may include any of a number of devices allowing the mobile terminal to receive data such as a keypad a touch display not shown a microphone or other input device. In embodiments including the keypad the keypad may include numeric 0 9 and related keys and other hard and soft keys used for operating the mobile terminal . Alternatively the keypad may include a conventional QWERTY keypad arrangement. The keypad may also include various soft keys with associated functions. In addition or alternatively the mobile terminal may include an interface device such as a joystick or other user input interface. The mobile terminal further includes a battery such as a vibrating battery pack for powering various circuits that are used to operate the mobile terminal as well as optionally providing mechanical vibration as a detectable output.

In some embodiments the mobile terminal includes a media capturing element such as a camera video and or audio module in communication with the controller . The media capturing element may be any means for capturing an image video and or audio for storage display or transmission. For example in an exemplary embodiment in which the media capturing element is a camera module the camera module may include a digital camera capable of forming a digital image file from a captured image. As such the camera module includes all hardware such as a lens or other optical component s and software necessary for creating a digital image file from a captured image. Alternatively the camera module may include only the hardware needed to view an image while a memory device of the mobile terminal stores instructions for execution by the controller in the form of software necessary to create a digital image file from a captured image. In an exemplary embodiment the camera module may further include a processing element such as a co processor which assists the controller in processing image data and an encoder and or decoder for compressing and or decompressing image data. The encoder and or decoder may encode and or decode according to a JPEG standard format or another like format. For video the encoder and or decoder may employ any of a plurality of standard formats such as for example standards associated with H.261 H.262 MPEG 2 H.263 H.264 H.264 MPEG 4 MPEG 4 and the like. In some cases the camera module may provide live image data to the display . Moreover in an exemplary embodiment the display may be located on one side of the mobile terminal and the camera module may include a lens positioned on the opposite side of the mobile terminal with respect to the display to enable the camera module to capture images on one side of the mobile terminal and present a view of such images to the user positioned on the other side of the mobile terminal .

The mobile terminal may further include a user identity module UIM which may generically be referred to as a smart card. The UIM is typically a memory device having a processor built in. The UIM may include for example a subscriber identity module SIM a universal integrated circuit card UICC a universal subscriber identity module USIM a removable user identity module R UIM or any other smart card. The UIM typically stores information elements related to a mobile subscriber. In addition to the UIM the mobile terminal may be equipped with memory. For example the mobile terminal may include volatile memory such as volatile Random Access Memory RAM including a cache area for the temporary storage of data. The mobile terminal may also include other non volatile memory which may be embedded and or may be removable. The non volatile memory may additionally or alternatively comprise an electrically erasable programmable read only memory EEPROM flash memory or the like. The memories may store any of a number of pieces of information and data used by the mobile terminal to implement the functions of the mobile terminal .

An exemplary embodiment of the invention will now be described with reference to in which certain elements of an apparatus for enabling the provision of multi thread video decoding are displayed. The apparatus of may be employed for example on the mobile terminal of . However it should be noted that the apparatus of may also be employed on a variety of other devices both mobile and fixed and therefore embodiments should not be limited to application on devices such as the mobile terminal of . Alternatively embodiments may be employed on a combination of devices including for example those listed above. Accordingly embodiments of the present invention may be embodied wholly at a single device e.g. the mobile terminal or by devices in a client server relationship. Furthermore it should be noted that the devices or elements described below may not be mandatory and thus some may be omitted in certain embodiments.

Referring now to an apparatus for enabling the provision of multi thread video decoding is provided. The apparatus may include or otherwise be in communication with a multi core processor a user interface a communication interface and a memory device . The memory device may include for example one or more volatile and or non volatile memories. In other words for example the memory device may be an electronic storage device e.g. a computer readable storage medium comprising gates configured to store data e.g. bits that may be retrievable by a machine e.g. a computing device . The memory device may be configured to store information data applications instructions or the like for enabling the apparatus to carry out various functions in accordance with exemplary embodiments of the present invention. For example the memory device could be configured to buffer input data for processing by the multi core processor . Additionally or alternatively the memory device could be configured to store instructions for execution by the multi core processor .

The multi core processor which may be an example of the controller of may be embodied in a number of different ways. For example the multi core processor may be embodied as two or more of various processing means such as a coprocessor a microprocessor a controller a digital signal processor DSP processing circuitry with or without an accompanying DSP or various other processing devices including integrated circuits such as for example an ASIC application specific integrated circuit an FPGA field programmable gate array a microcontroller unit MCU a hardware accelerator a special purpose computer chip or the like. In an exemplary embodiment the multi core processor may be configured to execute instructions stored in the memory device or otherwise accessible to one or more cores of the multi core processor . Alternatively or additionally the multi core processor may be configured to execute hard coded functionality. As such whether configured by hardware or software methods or by a combination thereof the multi core processor may represent an entity e.g. physically embodied in circuitry capable of performing operations according to embodiments of the present invention while configured accordingly. Thus for example when the multi core processor is embodied as two or more of an ASIC FPGA or the like the multi core processor may be specifically configured hardware for conducting the operations described herein. Alternatively as another example when the multi core processor is embodied as an executor of software instructions the instructions may specifically configure the multi core processor to perform the algorithms and or operations described herein when the instructions are executed. However in some cases the multi core processor may be a processor of a specific device e.g. a mobile terminal or network device adapted for employing embodiments of the present invention by further configuration of the multi core processor by instructions for performing the algorithms and or operations described herein. Each core of the multi core processor may include among other things a clock an arithmetic logic unit ALU and logic gates configured to support operation of the multi core processor .

Although an example embodiment will be described below in connection with a dual core processor other embodiments could be practiced in connection with additional processor cores.

Meanwhile the communication interface may be any means such as a device or circuitry embodied in either hardware software or a combination of hardware and software that is configured to receive and or transmit data from to a network and or any other device or module in communication with the apparatus. In this regard the communication interface may include for example an antenna or multiple antennas and supporting hardware and or software for enabling communications with a wireless communication network. In some environments the communication interface may alternatively or also support wired communication. As such for example the communication interface may include a communication modem and or other hardware software for supporting communication via cable digital subscriber line DSL universal serial bus USB or other mechanisms.

The user interface may be in communication with the multi core processor to receive an indication of a user input at the user interface and or to provide an audible visual mechanical or other output to the user. As such the user interface may include for example a keyboard a mouse a joystick a display a touch screen soft keys a microphone a speaker or other input output mechanisms. In an exemplary embodiment in which the apparatus is embodied as a server or some other network devices the user interface may be limited or eliminated. However in an embodiment in which the apparatus is embodied as a communication device e.g. the mobile terminal the user interface may include among other devices or elements any or all of a speaker a microphone a display and a keyboard or the like. In this regard for example the multi core processor may comprise user interface circuitry configured to control at least some functions of one or more elements of the user interface such as for example a speaker ringer microphone display and or the like. The multi core processor and or user interface circuitry comprising the multi core processor may be configured to control one or more functions of one or more elements of the user interface through computer program instructions e.g. software and or firmware stored on a memory accessible to the multi core processor e.g. memory device and or the like .

In an exemplary embodiment the multi core processor may be embodied as include or otherwise control a thread manager a decoder and a synchronizer . The thread manager the decoder and the synchronizer may each be any means such as a device or circuitry operating in accordance with software or otherwise embodied in hardware or a combination of hardware and software e.g. multi core processor operating under software control the multi core processor embodied as an ASIC or FPGA specifically configured to perform the operations described herein or a combination thereof thereby configuring the device or circuitry to perform the corresponding functions of the thread manager the decoder and the synchronizer respectively as described herein.

Thus in examples in which software is employed a device or circuitry e.g. the multi core processor in one example executing the software forms the structure associated with such means. Moreover in some cases functionality associated with the thread manager the decoder and or the synchronizer may be executed by a single one of the cores of the multi core processor .

The decoder may generally be configured to decode data that is encoded according to any of a plurality of video encoding standards. Thus for example the decoder may be configured generally to decode video data according to H.261 H.262 MPEG 2 H.263 H.264 H.264 MPEG 4 MPEG 4 or other standards. However the decoder may be configured to operate on such data as controlled by the multi core processor based on threads provided thereto by the thread manager and synchronization as performed by the synchronizer .

In an example embodiment the thread manager is configured to receive data that is to be decoded and divide the data into threads that are to be distributed to the respective core processors of the multi core processor . In an example case the number of threads generated by the thread manager is equal to the number of core processors in the multi core processor . Thus for example for a dual core processor incoming video frames may be equally divided into threads that are distributed between each core processor. In some embodiments each frame decoding operation may happen in a separate thread.

In addition to incoming video frames being divided into a number of threads that is equal to the number of core processors of the multi core processor each frame may also be divided into macroblock rows. A macroblock is a group of pixels the size of which depends on the corresponding encoding standard employed e.g. 4 4 8 8 12 12 or 16 16 pixel groups . Thus a macroblock row is a row of macroblocks as shown in which shows row X and row R.

Once the frames are assigned to threads by the thread manager the processing of the frame begins at the macroblock row level. Before beginning processing of a macroblock row a check may be made to ensure availability of data in the reference frame. If the data is not available then the synchronizer may put the current frame in a wait state. During processing the decoder may decode the threads while the synchronizer performs synchronization as described in greater detail below.

The synchronizer may be configured to work with the decoder to provide synchronization during the decoding process. In this regard for example the synchronizer may be configured to perform synchronization based on the availability of decoded macroblock rows in the reference frame. In some embodiments the synchronization may be performed prior to decoding each respective macroblock row. By performing synchronization at the macroblock row level rather than at the macroblock level synchronization overhead may be significantly reduced. For example rather than synchronizing for every single macroblock e.g. 396 operations for CIF common intermediate format and 1200 operations for VGA video graphics array a significantly reduced number of checks may be performed e.g. 18 for CIF and 30 for VGA .

As indicated above video standards typically limit the vertical range of absolute motion vectors to a couple of macroblock rows depending on the level of information indicated in the bitstream. Limits on the absolute motion vectors may be direct or indirect.

As an example standards like H.264 specify the maximum absolute motion vector of a macroblock in the vertical direction thereby directly limiting the absolute motion vectors. Meanwhile standards like On2VP6 specify a maximum range for differential motion vectors which provides an indirect limit on the absolute motion vector. shows a basic view of macroblocks A B C and E to illustrate a relationship between absolute motion vectors differential motion vectors and predicted motion vectors according to an example embodiment. In this regard the absolute motion vector for E is equal to the predicted motion vector of E plus the differential motion vector of E. In some embodiments the predicted motion vector of a particular macroblock can be estimated by considering that the median mv mv mv is always less than or equal to the maximum mv mv mv . Thus the predicted motion vector for a particular macroblock may be considered to be less than or equal to the maximum motion vector of the previous row. In the context of the example of the predicted motion vector for E may be estimated by taking the median of the motion vectors MV for macroblock motion vectors above E e.g. MV to the left of E e.g. MV and to the top and right of E e.g. MV . In this regard if MVis maximum then the median will be either MVor MV so the predicted range is limited to the maximum MV of the previous row. Similarly if MVis maximum then the median will be either MVor MVand if MVis maximum then the median will be either MVor MV. Accordingly the range of the predicted motion vector may be limited in advance based on the maximum motion vectors of the prior row.

In other words a maximum limit to the motion vector of the current macroblock row may be set by adding the maximum motion vector of the previous macroblock row to the maximum differential motion vector defined by the standard.

Before the decoder starts decoding a macroblock row a check may be made to see that the position pointed to in the reference frame by adding current row position and the maximum vertical motion vector range as defined by the corresponding standard employed has been decoded. If the position pointed to has not been decoded execution of the current thread may be suspended until such decoding occurs. In some embodiments a pthread cond wait application programming interface API may be employed to initiate the suspension. After decoding each macroblock row a thread may call a pthread cond broadcast API to signal any thread currently being suspended to resume execution. Thus if one particular thread is waiting for a specific macroblock row to be decoded the particular thread may resume execution as soon as signaling is received to indicate that the specific macroblock row has been decoded. Since frame decoding of a particular thread is executed on the same corresponding core even if there is a suspension caches need not be flushed since relevant data will still be present in the cache.

In some cases a check may also be made as to whether macroblock row data is ready before the pthread cond broadcast API is called. In this regard for standards that support an inloop deblocking filter or an unrestricted motion vector deblocking and frame padding may be completed respectively prior to a macroblock row being considered to be ready for calling of the pthread cond broadcast API. Furthermore some embodiments may employ a provision for handling long term picture buffers. In this regard if a frame that is being decoded is to be placed into a long term picture buffer queue then the corresponding pointer may be provided to frames that desire access to the long term picture buffer during the decoding of a frame. After decoding of the frame is completed the frame may be copied into memory marked separately for the long term picture buffer. The frame pointer may also be restored to point back to the long term picture buffer.

In some embodiments the synchronizer may be configured to also provide refinements to the synchronization performed and or provide synchronization operations that are specific to a particular standard or coding scheme. As an example for video decoders that use a context adaptive decoding process such as context adaptive binary arithmetic coding CABAC probability tables for a frame may be updated after tables for a previous frame have been updated. Thus at a first point of synchronization the tables from a previous frame are used to update the table for the current frame and then CABAC initialization may occur for the current frame. This particular coding scheme specific operation may occur at the beginning of every frame for embodiments that employ CABAC or other context adaptive decoding processes.

Refinements to the synchronization process may be provided by the synchronizer in the form of overall fine tuning adjustments. In some cases information regarding cache size e.g. L2 L3 cache size and frame resolution may be utilized in connection with making fine tuning adjustments. In this regard for example information regarding cache size and frame resolution may be used to limit the maximum lag between decoding of two successive frames. The cache e.g. L2 L3 caches may be shared between each core of the multi core processor . Thus by adapting a lag threshold efforts may be made to provide that a macroblock row that forms the reference for a subsequent frame is available in the cache.

As an example consider a dual core processor having a shared L2 cache that is 512 KB in size. Decoding for VGA sized video having YUV 4 2 0 data would yield a VGA frame size of 640 480 1.5 450 KB. For such a system there may be at least 3 frame buffers being used simultaneously e.g. one for the reference frame and one for the current and subsequent frames as shown in . A ratio of available L2 L3 cache may be calculated relative to the memory requirement for 3 frames. In this example the ratio is 512 450 3 0.38.

By multiplying this number by the number of rows in the frame a maximum lag between two frames may be determined. Thus in this example for VGA the maximum lag would be 0.38 30 11 rows. However the lag is limited to a maximum of the number of rows in the frame and to a minimum of the motion vector range as specified by the standard. Accordingly if it is desirable to decode a QVGA video on such a system the ratio is 512 112.5 3 1.5. Therefore QVGA may allow for a full frame lag and it may not be necessary to apply this particular synchronization for QVGA. Thus if it appears as though one particular frame is leading another frame that is using the particular frame as a reference the particular frame may be stalled until the other frame catches up.

Accordingly based on the description above the use of the thread manager and the synchronizer in connection with the decoder may provide for a reduction in decoding time by using multiple cores for processing but still limit overhead and therefore conserve battery power. Thus even mobile terminals may be enabled to provide playback of high resolution and high frame rate video content. Embodiments of the present invention also offer flexibility to work with multiple different types of video decoders while offering performance gains that do not necessarily require specifically tailored strategies.

Accordingly blocks of the flowchart support combinations of means for performing the specified functions combinations of operations for performing the specified functions and program instruction means for performing the specified functions. It will also be understood that one or more blocks of the flowchart and combinations of blocks in the flowchart can be implemented by special purpose hardware based computer systems which perform the specified functions or operations or combinations of special purpose hardware and computer instructions.

In this regard one embodiment of a method for enabling provision of multi thread video decoding may include assigning decoding of a respective video frame to a corresponding thread for each processor core of a multi core processor in which each respective video frame is divided into macroblock rows at operation . The method may further include resolving dependencies for each respective video frame at a macroblock row level at operation and providing synchronization for video decoding of each corresponding thread at the macroblock row level at operation .

In some embodiments certain ones of the operations above may be modified or further amplified as described below. Modifications or amplifications to the operations above may be performed in any order and in any combination. In this regard for example resolving dependencies may include determining an availability of a decoded macroblock row in a reference frame. In such an embodiment providing synchronization may include performing synchronization based on the availability of the decoded macroblock row in the reference frame. In an example embodiment resolving dependencies may include determining whether a position pointed to in a reference frame has been decoded prior to decoding a macroblock row. The position pointed to may be determined by adding current row position and a maximum vertical motion vector range. In some cases resolving dependencies may include limiting a predicted motion vector in advance based on a maximum motion vector of a prior row. In an example embodiment providing synchronization may include updating a probability table for a frame after a probability table for a previous frame has been updated for a video decoder that uses a context adaptive decoding process. In some embodiments providing synchronization may include limiting a maximum lag between decoding successive frames based on frame resolution and cache size of a cache having shared access among each core processor of the multi core processor.

In an exemplary embodiment an apparatus for performing the method of above may comprise one or more processors e.g. the multi core processor configured to perform some or each of the operations described above. The processors may for example be configured to perform the operations by performing hardware implemented logical functions executing stored instructions or executing algorithms for performing each of the operations. Alternatively the apparatus may comprise means for performing each of the operations described above. In this regard according to an example embodiment examples of means for performing operations may comprise for example corresponding ones of the multi core processor the thread manager the decoder the synchronizer and or a device or circuit for executing instructions or executing an algorithm for processing information as described above.

Many modifications and other embodiments of the inventions set forth herein will come to mind to one skilled in the art to which these inventions pertain having the benefit of the teachings presented in the foregoing descriptions and the associated drawings. Therefore it is to be understood that the inventions are not to be limited to the specific embodiments disclosed and that modifications and other embodiments are intended to be included within the scope of the appended claims. Moreover although the foregoing descriptions and the associated drawings describe exemplary embodiments in the context of certain exemplary combinations of elements and or functions it should be appreciated that different combinations of elements and or functions may be provided by alternative embodiments without departing from the scope of the appended claims. In this regard for example different combinations of elements and or functions than those explicitly described above are also contemplated as may be set forth in some of the appended claims. Although specific terms are employed herein they are used in a generic and descriptive sense only and not for purposes of limitation.

